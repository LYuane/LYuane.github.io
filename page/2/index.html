<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"lyuane.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="路漫漫其修远兮,吾将上下而求索">
<meta property="og:type" content="website">
<meta property="og:title" content="沄渊">
<meta property="og:url" content="http://lyuane.github.io/page/2/index.html">
<meta property="og:site_name" content="沄渊">
<meta property="og:description" content="路漫漫其修远兮,吾将上下而求索">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="沄渊">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://lyuane.github.io/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>沄渊</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">沄渊</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">守得云开见月明</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="沄渊"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">沄渊</p>
  <div class="site-description" itemprop="description">路漫漫其修远兮,吾将上下而求索</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/07/11/2019-07-11-%E6%96%B0%E9%97%BB%E7%BD%91%E7%AB%99%E7%88%AC%E8%99%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/07/11/2019-07-11-%E6%96%B0%E9%97%BB%E7%BD%91%E7%AB%99%E7%88%AC%E8%99%AB/" class="post-title-link" itemprop="url">新浪新闻爬虫</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-07-11 00:00:00" itemprop="dateCreated datePublished" datetime="2019-07-11T00:00:00+08:00">2019-07-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>``</p>
<h3 id="0x00-环境"><a href="#0x00-环境" class="headerlink" title="0x00 环境"></a>0x00 环境</h3><p>python3.7</p>
<h3 id="0x01-代码思路"><a href="#0x01-代码思路" class="headerlink" title="0x01 代码思路"></a>0x01 代码思路</h3><p>主要对新浪新闻网站下的<a target="_blank" rel="noopener" href="https://news.sina.com.cn/china/">国内新闻</a>进行爬取分析</p>
<p>代码主要分为两部分：链接池和网页分析</p>
<p>链接池：爬取某个页面下所有的本新闻网站链接</p>
<p>网页分析：对链接池中的每个链接进行网页分析，提取必要信息，并存储为XML文件</p>
<h3 id="0x02-链接池"><a href="#0x02-链接池" class="headerlink" title="0x02 链接池"></a>0x02 链接池</h3><p>思路：对<a target="_blank" rel="noopener" href="https://news.sina.com.cn/china/%E8%BF%94%E5%9B%9E%E7%9A%84%E6%BA%90%E7%A0%81%E8%BF%9B%E8%A1%8C%E5%88%86%E6%9E%90%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%89%BE%E5%88%B0%E4%BB%A5%60https://news.sina.com.cn/c/%60%E5%BC%80%E5%A4%B4%E7%9A%84%E9%93%BE%E6%8E%A5%E5%88%99%E4%BF%9D%E5%AD%98%EF%BC%88%E9%80%9A%E8%BF%87%E5%88%86%E6%9E%90%E5%8F%AF%E7%9F%A5%E9%81%93%60https://news.sina.com.cn/c/...%60%E8%BF%99%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%93%BE%E6%8E%A5%E6%98%AF%E6%88%91%E4%BB%AC%E6%89%80%E9%9C%80%E7%9A%84%E9%93%BE%E6%8E%A5%EF%BC%89">https://news.sina.com.cn/china/返回的源码进行分析，如果找到以`https://news.sina.com.cn/c/`开头的链接则保存（通过分析可知道`https://news.sina.com.cn/c/...`这种类型的链接是我们所需的链接）</a></p>
<h4 id="2-1-获取网页源码"><a href="#2-1-获取网页源码" class="headerlink" title="2.1 获取网页源码"></a>2.1 获取网页源码</h4><p>如下图，可以看到我们得到了root所返回的网页信息</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190711162806.png"></p>
<h4 id="2-2-筛选所需链接"><a href="#2-2-筛选所需链接" class="headerlink" title="2.2 筛选所需链接"></a>2.2 筛选所需链接</h4><p>查看一下其中所包含的链接，可以看到有许多我们不需要的链接甚至一些外链，所以要筛选一下</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190711163014.png"></p>
<p>查看他们的特征，可以看到我们所需要的国内新闻是以<a target="_blank" rel="noopener" href="https://news.sina.com.cn/c/%E5%BC%80%E5%A4%B4%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE">https://news.sina.com.cn/c/开头，如下图</a></p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190711163204.png"></p>
<p>所以这里只需要一个简单的判断</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190711163847.png"></p>
<h4 id="2-3综合代码"><a href="#2-3综合代码" class="headerlink" title="2.3综合代码"></a>2.3综合代码</h4><p>当然这里也可以继续对爬下来的链接再做一个循环进行爬取</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_news_pool</span>(<span class="params">root</span>):</span></span><br><span class="line">    news_pool = []</span><br><span class="line">    response = urllib.request.urlopen(root)</span><br><span class="line">    html = response.read()</span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">    td = soup.findAll(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> td:</span><br><span class="line">        <span class="keyword">if</span> (i.get(<span class="string">&#x27;href&#x27;</span>) != <span class="literal">None</span> <span class="keyword">and</span> i.get(<span class="string">&#x27;href&#x27;</span>).find(<span class="string">&#x27;https://news.sina.com.cn/c/&#x27;</span>) == <span class="number">0</span> <span class="keyword">and</span> i <span class="keyword">not</span> <span class="keyword">in</span> news_pool):</span><br><span class="line">            news_pool.append(i.get(<span class="string">&#x27;href&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> news_pool</span><br></pre></td></tr></table></figure>



<h3 id="0x03-网页分析"><a href="#0x03-网页分析" class="headerlink" title="0x03 网页分析"></a>0x03 网页分析</h3><p>对于链接池中的每个链接进行分析，并保存为XML文件，这里就以第一个链接<a target="_blank" rel="noopener" href="https://news.sina.com.cn/c/2019-07-10/doc-ihytcerm2690075.shtml%E4%B8%BA%E4%BE%8B">https://news.sina.com.cn/c/2019-07-10/doc-ihytcerm2690075.shtml为例</a></p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190711164231.png"></p>
<h4 id="3-1-网页源码获取"><a href="#3-1-网页源码获取" class="headerlink" title="3.1 网页源码获取"></a>3.1 网页源码获取</h4><p>这里需要注意的是中文的编码问题</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190711164622.png"></p>
<h4 id="3-2-获取所需信息"><a href="#3-2-获取所需信息" class="headerlink" title="3.2 获取所需信息"></a>3.2 获取所需信息</h4><p>获取其中我们需要的信息，这里我需要的是标题、时间、正文</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190711165056.png"></p>
<h4 id="3-3-保存"><a href="#3-3-保存" class="headerlink" title="3.3 保存"></a>3.3 保存</h4><p>可以保存在数据库，也可以保存为本地文件（如果数据量比较小）</p>
<p>这里保存为本地的XML文件</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190711165817.png"></p>
<p>打开看一下</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190711170310.png"></p>
<h4 id="3-4-综合代码"><a href="#3-4-综合代码" class="headerlink" title="3.4 综合代码"></a>3.4 综合代码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl_news</span>(<span class="params">news_pool, doc_dir_path, doc_encoding</span>):</span></span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> news <span class="keyword">in</span> news_pool:</span><br><span class="line">        res = requests.get(news)</span><br><span class="line">        res.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">        soup = BeautifulSoup(res.text, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            title = soup.select(<span class="string">&#x27;.main-title&#x27;</span>)[<span class="number">0</span>].text<span class="comment">#获取标题</span></span><br><span class="line">            timesource = soup.select(<span class="string">&#x27;.date-source span&#x27;</span>)[<span class="number">0</span>].text  <span class="comment"># 获取时间</span></span><br><span class="line">            article = []  <span class="comment"># 获取文章内容</span></span><br><span class="line">            <span class="keyword">for</span> p <span class="keyword">in</span> soup.select(<span class="string">&#x27;#article p&#x27;</span>)[:-<span class="number">1</span>]:</span><br><span class="line">                article.append(p.text.strip())</span><br><span class="line">            articleall = <span class="string">&#x27; &#x27;</span>.join(article)</span><br><span class="line">			<span class="comment">#保存为XML文件</span></span><br><span class="line">            doc = ET.Element(<span class="string">&quot;doc&quot;</span>)</span><br><span class="line">            ET.SubElement(doc, <span class="string">&quot;id&quot;</span>).text = <span class="string">&quot;%d&quot;</span> % (i)</span><br><span class="line">            ET.SubElement(doc, <span class="string">&quot;url&quot;</span>).text = news</span><br><span class="line">            ET.SubElement(doc, <span class="string">&quot;title&quot;</span>).text = title</span><br><span class="line">            ET.SubElement(doc, <span class="string">&quot;datetime&quot;</span>).text = timesource</span><br><span class="line">            ET.SubElement(doc, <span class="string">&quot;body&quot;</span>).text = articleall</span><br><span class="line">            tree = ET.ElementTree(doc)</span><br><span class="line">            tree.write(doc_dir_path + <span class="string">&quot;%d.xml&quot;</span> % (i), encoding=doc_encoding, xml_declaration=<span class="literal">True</span>)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">except</span> IndexError:</span><br><span class="line">            <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h3 id="0x04-代码整合"><a href="#0x04-代码整合" class="headerlink" title="0x04 代码整合"></a>0x04 代码整合</h3><p><a target="_blank" rel="noopener" href="https://github.com/LYuane/news_spider">放在github上</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/06/23/2019-06-23-git%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/23/2019-06-23-git%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/" class="post-title-link" itemprop="url">git设置代理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-23 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-23T00:00:00+08:00">2019-06-23</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h3><p>目前国内的网络环境限制比较严格，所以在访问git时就会出现一些问题。可以通过代理使用git，但是必须要设置一下代理。</p>
<h3 id="0x01-git错误"><a href="#0x01-git错误" class="headerlink" title="0x01    git错误"></a>0x01    git错误</h3><p>我在push时出现了类似下面的错误</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">failed to connect to github.com port:443 timed out</span><br></pre></td></tr></table></figure>

<h3 id="0x02-原因"><a href="#0x02-原因" class="headerlink" title="0x02    原因"></a>0x02    原因</h3><p>校园网由于网络环境限制不能访问，电脑用了代理  但是git没有设置</p>
<h3 id="0x03-解决方案"><a href="#0x03-解决方案" class="headerlink" title="0x03    解决方案"></a>0x03    解决方案</h3><p>git设置全局代理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy 127.0.0.1:1080</span><br></pre></td></tr></table></figure>

<p>查看是否设置成功</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --get http.proxy</span><br></pre></td></tr></table></figure>



<h3 id="0x04-意外情况"><a href="#0x04-意外情况" class="headerlink" title="0x04    意外情况"></a>0x04    意外情况</h3><p>如果你的代理IP或端口设置错误的话，会报如下错误，需要正确设置你的代理。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">······Proxy CONNECT aborted</span><br></pre></td></tr></table></figure>



<p>这里我本机用的代理是SS，默认的就是127.0.0.1：1080</p>
<p>但是一些电脑在公司内网可能就不是了</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/06/07/2019-06-07-KNN%E4%B8%8EK-Means%E7%AE%97%E6%B3%95%E6%AF%94%E8%BE%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/07/2019-06-07-KNN%E4%B8%8EK-Means%E7%AE%97%E6%B3%95%E6%AF%94%E8%BE%83/" class="post-title-link" itemprop="url">KNN与K-Means算法比较</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-07 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-07T00:00:00+08:00">2019-06-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="KNN-与-K-Means-算法比较"><a href="#KNN-与-K-Means-算法比较" class="headerlink" title="KNN 与 K - Means 算法比较"></a>KNN 与 K - Means 算法比较</h1><table>
<thead>
<tr>
<th>KNN</th>
<th align="center">K-Means</th>
</tr>
</thead>
<tbody><tr>
<td>1.分类算法</td>
<td align="center">聚类算法</td>
</tr>
<tr>
<td>2.监督学习</td>
<td align="center">非监督学习</td>
</tr>
<tr>
<td>3.数据类型：喂给它的数据集是带label的数据，已经是完全正确的数据</td>
<td align="center">喂给它的数据集是无label的数据，是杂乱无章的，经过聚类后才变得有点顺序，先无序，后有序</td>
</tr>
<tr>
<td>4.训练过程：没有明显的前期训练过程，属于memory-based learning</td>
<td align="center">有明显的前期训练过程</td>
</tr>
<tr>
<td>5.K的含义：来了一个样本x，要给它分类，即求出它的y，就从数据集中，在x附近找离它最近的K个数据点，这K个数据点，类别c占的个数最多，就把x的label设为c</td>
<td align="center">K是人工固定好的数字，假设数据集合可以分为K个簇，由于是依靠人工定好，需要一点先验知识</td>
</tr>
</tbody></table>
<ul>
<li>相似点：都包含这样的过程，给定一个点，在数据集中找离它最近的点。即二者都用到了NN(Nears Neighbor)算法，一般用KD树来实现NN。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/06/07/2019-06-07-KNN%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/06/07/2019-06-07-KNN%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">KNN分类算法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-07 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-07T00:00:00+08:00">2019-06-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="一、-KNN算法简介"><a href="#一、-KNN算法简介" class="headerlink" title="一、 KNN算法简介"></a>一、 KNN算法简介</h2><p>最简单最初级的分类器是将全部的训练数据所对应的类别都记录下来，当测试对象的属性和某个训练对象的属性完全匹配时，便可以对其进行分类。但是怎么可能所有测试对象都会找到与之完全匹配的训练对象呢，其次就是存在一个测试对象同时与多个训练对象匹配，导致一个训练对象被分到了多个类的问题，基于这些问题呢，就产生了KNN。</p>
<p>KNN基于这样一种假设，即相似的实例在某种距离度量上应该更为接近。因此在对新实例进行分类时，新实例的分类取决于与其最接近的K个已知实例中出现次数最多的分类(mode)；在对新实例进行回归时，则可使用最接近的K个已知实例的值的平均数。</p>
<h2 id="二、-KNN算法介绍"><a href="#二、-KNN算法介绍" class="headerlink" title="二、 KNN算法介绍"></a>二、 KNN算法介绍</h2><h3 id="2-1-定义"><a href="#2-1-定义" class="headerlink" title="2.1 定义"></a>2.1 定义</h3><p>KNN是通过测量不同特征值之间的距离进行分类。它的的思路是：如果一个样本在特征空间中的k个最相似(即特征空间中最邻近)的样本中的大多数属于某一个类别，则该样本也属于这个类别。K通常是不大于20的整数。KNN算法中，所选择的邻居都是已经正确分类的对象。该方法在定类决策上只依据最邻近的一个或者几个样本的类别来决定待分样本所属的类别。</p>
<p>K最近邻(K-Nearest Neighbors, KNN)是一种基于实例的学习方法(instance-based learning)，通过与已有实例的比较来对新的实例进行分类(classification)或回归(regression)。因为基于实例的学习方法在对新实例进行预测之前不需要进行训练，所以也是一种惰性学习方法(lazy learning)。</p>
<p>下面通过一个简单的例子说明一下：如下图，绿色圆要被决定赋予哪个类，是红色三角形还是蓝色四方形？如果K=3，由于红色三角形所占比例为2/3，绿色圆将被赋予红色三角形那个类，如果K=5，由于蓝色四方形比例为3/5，因此绿色圆被赋予蓝色四方形类。</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20200212172448.png"></p>
<h3 id="2-2-距离函数选择"><a href="#2-2-距离函数选择" class="headerlink" title="2.2 距离函数选择"></a>2.2 距离函数选择</h3><p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20200212172405.png"></p>
<p>P.S.加权距离——处理维度灾难的一种方法</p>
<h3 id="2-3-Classification-vs-Regression"><a href="#2-3-Classification-vs-Regression" class="headerlink" title="2.3 Classification vs. Regression"></a>2.3 Classification vs. Regression</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Classification ——— Vote</span><br><span class="line">Regression     ——— Mean</span><br></pre></td></tr></table></figure>

<p>通常， 在分类任务中可使用”投票法” 即选择这k 个样本中出现最多的类别标记作为预测结果;</p>
<p>在回归任务中时使用”平均法” ，即将这k 个样本的实值输出标记的平均值作为预测结果.</p>
<h3 id="2-4-优点"><a href="#2-4-优点" class="headerlink" title="2.4 优点"></a>2.4 优点</h3><p>无需训练，只需将已知实例存储起来</p>
<p>实现相对简单，例如计算实例之间的距离就比其他动辄需要求解最优化问题的算法要简单得多</p>
<h3 id="2-5-缺点"><a href="#2-5-缺点" class="headerlink" title="2.5 缺点"></a>2.5 缺点</h3><p>因为需要将已知实例存储起来，所以需要占用的空间直接取决于实例的数量。</p>
<p>例如在项目中作为成果物提交的分类器，如果是其它方法只需提交训练得到的模型和参数，而基于实例的方法就需要把所有的实例数据都打包，因为其数据即模型。</p>
<p>因为预测时需要与所有已知实例比对，所以耗时也取决于实例的数量。可以用诸如对距离进行排序再进行二分查找的方式优化（此时时间复杂度为log2Nlog2N)</p>
<h3 id="2-6-维度灾难-curse-of-dimensionality"><a href="#2-6-维度灾难-curse-of-dimensionality" class="headerlink" title="2.6 维度灾难(curse of dimensionality)"></a>2.6 维度灾难(curse of dimensionality)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">As the number of features or dimensions grows, </span><br><span class="line">the amount of data we need to generalize accurately also grows exponetially!</span><br><span class="line"></span><br><span class="line">指数增长在CS领域很糟糕！</span><br></pre></td></tr></table></figure>

<p>随着维度的增加，需要维持准确预测的已知实例的数量会随之指数级增加。</p>
<p>因为在增加了新维度之后，已知实例在新空间的投影就变得更稀疏，从而需要比原空间中多得多的实例进行填充</p>
<p>补充：由于KNN训练的代价小(因为不作训练)，KNN或可被用于在线学习(online machine learning)中，即使用新数据不断训练和更新已有模型从而作出更好的预测.</p>
<h2 id="三、KNN算法代码实现"><a href="#三、KNN算法代码实现" class="headerlink" title="三、KNN算法代码实现"></a>三、KNN算法代码实现</h2><h3 id="3-1-pseudocode-伪代码流程"><a href="#3-1-pseudocode-伪代码流程" class="headerlink" title="3.1 pseudocode 伪代码流程"></a>3.1 pseudocode 伪代码流程</h3><p>接下来对KNN算法的思想总结一下：就是在训练集中数据和标签已知的情况下，输入测试数据，将测试数据的特征与训练集中对应的特征进行相互比较，找到训练集中与之最为相似的前K个数据，则该测试数据对应的类别就是K个数据中出现次数最多的那个分类，其算法的描述为：</p>
<p>1）计算测试数据与各个训练数据之间的距离；</p>
<p>2）按照距离的递增关系进行排序；</p>
<p>3）选取距离最小的K个点；</p>
<p>4）确定前K个点所在类别的出现频率；</p>
<p>5）返回前K个点中出现频率最高的类别作为测试数据的预测分类。</p>
<h3 id="3-2-Python-代码实例"><a href="#3-2-Python-代码实例" class="headerlink" title="3.2 Python 代码实例"></a>3.2 Python 代码实例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="comment">#科学计算包</span></span><br><span class="line"><span class="keyword">import</span> operator <span class="comment">#运算符模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##给出训练数据以及对应的类别</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createDataSet</span>():</span></span><br><span class="line">    group = array([[<span class="number">1.0</span>,<span class="number">2.0</span>],[<span class="number">1.2</span>,<span class="number">0.1</span>],[<span class="number">0.1</span>,<span class="number">1.4</span>],[<span class="number">0.3</span>,<span class="number">3.5</span>]])</span><br><span class="line">    labels = [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;B&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> group,labels</span><br><span class="line"></span><br><span class="line"><span class="comment">###通过KNN进行分类</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">classify</span>(<span class="params"><span class="built_in">input</span>,dataSet,label,k</span>):</span></span><br><span class="line">    </span><br><span class="line">    dataSize = dataSet.shape[<span class="number">0</span>] <span class="comment">#求数组的行数</span></span><br><span class="line">    <span class="comment">####计算欧式距离</span></span><br><span class="line">    diff = tile(<span class="built_in">input</span>,(dataSize,<span class="number">1</span>)) - dataSet </span><br><span class="line">    <span class="comment">#tile使input变为和dataSet相同行数的数组</span></span><br><span class="line">    <span class="comment">#&gt;&gt;&gt; numpy.tile([1.1,0.3],(4,1))#在行方向上重复4次 在列方向上重复1次， </span></span><br><span class="line">    <span class="comment"># array([[ 1.1,  0.3],</span></span><br><span class="line"><span class="comment">#           [ 1.1,  0.3],</span></span><br><span class="line"><span class="comment">#           [ 1.1,  0.3],</span></span><br><span class="line"><span class="comment">#           [ 1.1,  0.3]])</span></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    sqdiff = diff ** <span class="number">2</span> <span class="comment"># x^2 , y^2</span></span><br><span class="line">    squareDist = <span class="built_in">sum</span>(sqdiff,axis = <span class="number">1</span>) <span class="comment">###矩阵行向量分别相加，从而得到新的一个行向量</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment">#c = np.array([[0, 2, 1], [3, 5, 6], [0, 1, 1]])</span></span><br><span class="line"><span class="comment">#print c.sum()</span></span><br><span class="line"><span class="comment">#print c.sum(axis=0)</span></span><br><span class="line"><span class="comment">#print c.sum(axis=1)</span></span><br><span class="line"><span class="comment">#19</span></span><br><span class="line"><span class="comment">#[3 8 8]</span></span><br><span class="line"><span class="comment">#[ 3 14  2]</span></span><br><span class="line">    dist = squareDist ** <span class="number">0.5</span> <span class="comment"># 开根号</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">##对距离进行排序</span></span><br><span class="line">    sortedDistIndex = argsort(dist)<span class="comment">##argsort()根据元素的值从小到大对元素进行排序，返回下标</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">###对选取的K个样本所属的类别个数进行统计</span></span><br><span class="line">    classCount=&#123;&#125;  <span class="comment"># 保存A,B出现次数的字典</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">        voteLabel = label[sortedDistIndex[i]]</span><br><span class="line">        <span class="comment"># 获取索引值对应的是A还是B</span></span><br><span class="line"></span><br><span class="line">         <span class="comment"># 在字典中保存A,B出现的次数</span></span><br><span class="line">        classCount[voteLabel] = classCount.get(voteLabel,<span class="number">0</span>) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">###选取出现的类别次数最多的类别</span></span><br><span class="line">    maxCount = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> key,value <span class="keyword">in</span> classCount.items():</span><br><span class="line">        <span class="keyword">if</span> value &gt; maxCount:</span><br><span class="line">            maxCount = value</span><br><span class="line">            classes = key</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> classes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dataSet,labels = createDataSet()</span><br><span class="line"><span class="built_in">input</span> = array([<span class="number">1.1</span>,<span class="number">0.3</span>])</span><br><span class="line">K = <span class="number">3</span></span><br><span class="line">output = classify(<span class="built_in">input</span>,dataSet,labels,K)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;test data :&quot;</span>,<span class="built_in">input</span>,<span class="string">&quot;classification result:&quot;</span>,output)</span><br><span class="line"></span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">(<span class="string">&#x27;test data :&#x27;</span>, array([ <span class="number">1.1</span>,  <span class="number">0.3</span>]), <span class="string">&#x27;classification result:&#x27;</span>, <span class="string">&#x27;A&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>参考文章：</p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/littlepear/p/8269653.html">http://www.cnblogs.com/littlepear/p/8269653.html</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/ybjourney/p/4702562.html">http://www.cnblogs.com/ybjourney/p/4702562.html</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/jmydream/article/details/8644004">http://blog.csdn.net/jmydream/article/details/8644004</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/05/23/2019-05-23-K-Means%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/23/2019-05-23-K-Means%E6%89%8B%E5%8A%A8%E6%A8%A1%E6%8B%9F%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">K-Means手动模拟代码实现</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-23 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-23T00:00:00+08:00">2019-05-23</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x01-第一版代码"><a href="#0x01-第一版代码" class="headerlink" title="0x01 第一版代码"></a>0x01 第一版代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 针对特定数据实现的K-means算法</span></span><br><span class="line"><span class="comment"># author:Yuane</span></span><br><span class="line"><span class="comment"># date :2019-5-16</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">data = [[<span class="number">0.</span>,<span class="number">0.</span>],[<span class="number">0.</span>,<span class="number">1.</span>],[<span class="number">1.</span>,<span class="number">0.</span>],[<span class="number">1.</span>,<span class="number">1.</span>],</span><br><span class="line">        [<span class="number">5.</span>,<span class="number">5.</span>],[<span class="number">5.</span>,<span class="number">6.</span>],[<span class="number">6.</span>,<span class="number">5.</span>],[<span class="number">6.</span>,<span class="number">6.</span>]]</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 随机生成k个中心</span></span><br><span class="line"><span class="string"># 计算每个点到两个质心的距离并归属到距离小的cluster</span></span><br><span class="line"><span class="string"># 计算每个cluster的质心并改变</span></span><br><span class="line"><span class="string"># 再次重复2、3步直至稳定</span></span><br><span class="line"><span class="string"># 输出结果</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">size = <span class="built_in">len</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化时生成随机质心，这里简化直接返回固定质心</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rand_center</span>(<span class="params">data,k</span>):</span></span><br><span class="line">    <span class="keyword">return</span> [[<span class="number">1</span>,<span class="number">1</span>],[<span class="number">5</span>,<span class="number">5</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment">#计算两点间距离</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">distance</span>(<span class="params">data0,data1</span>):</span></span><br><span class="line">    x = <span class="built_in">abs</span>(data0[<span class="number">0</span>]-data1[<span class="number">0</span>])</span><br><span class="line">    y = <span class="built_in">abs</span>(data0[<span class="number">1</span>]-data1[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">pow</span>((<span class="built_in">pow</span>(x,<span class="number">2</span>)+<span class="built_in">pow</span>(y,<span class="number">2</span>)),<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kmean</span>(<span class="params">data,k=<span class="number">2</span></span>):</span></span><br><span class="line">    center = rand_center(data,k)</span><br><span class="line">    Notstable = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> Notstable:</span><br><span class="line">        Notstable = <span class="literal">False</span></span><br><span class="line">        <span class="comment"># 用cluster数组表示每个点对应的cluster</span></span><br><span class="line">        cluster =[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size)]</span><br><span class="line">        <span class="comment"># 计算每个点所属的cluster</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">            min_distance = sys.float_info.<span class="built_in">max</span></span><br><span class="line">            cluster_sign = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">                cluster_sign= cluster_sign <span class="keyword">if</span> min_distance&lt;distance(data[i],center[j]) <span class="keyword">else</span> j</span><br><span class="line">                min_distance = min_distance <span class="keyword">if</span> min_distance&lt;distance(data[i],center[j]) <span class="keyword">else</span> distance(data[i],center[j])</span><br><span class="line">            cluster[i]=cluster_sign</span><br><span class="line">        </span><br><span class="line">        <span class="comment">#计算新的质心</span></span><br><span class="line">        <span class="comment">#print cluster</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">            data_x = <span class="number">0.</span></span><br><span class="line">            data_y = <span class="number">0.</span></span><br><span class="line">            data_center_x = <span class="number">0.</span></span><br><span class="line">            data_center_y = <span class="number">0.</span></span><br><span class="line">            data_num = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">                <span class="keyword">if</span>(cluster[j]==i):</span><br><span class="line">                    <span class="built_in">print</span> cluster[j]</span><br><span class="line">                    data_x = data_x+data[j][<span class="number">0</span>]</span><br><span class="line">                    data_y = data_y+data[j][<span class="number">1</span>]</span><br><span class="line">                    data_num += <span class="number">1</span></span><br><span class="line">            <span class="comment">#print data_num</span></span><br><span class="line">            data_center_x = <span class="built_in">float</span>(data_x/data_num)</span><br><span class="line">            data_center_y = <span class="built_in">float</span>(data_y/data_num)</span><br><span class="line">            <span class="comment">#判断是否质心发生变化</span></span><br><span class="line">            <span class="keyword">if</span>(center[i][<span class="number">0</span>]!=data_center_x <span class="keyword">or</span> center[i][<span class="number">1</span>]!=data_center_y):</span><br><span class="line">                Notstable = <span class="literal">True</span></span><br><span class="line">                center[i][<span class="number">0</span>]=data_center_x</span><br><span class="line">                center[i][<span class="number">1</span>]=data_center_y</span><br><span class="line">    <span class="keyword">return</span> center,cluster</span><br><span class="line">            </span><br><span class="line"><span class="built_in">print</span> kmean(data,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p><img src="C:\Users\13638\AppData\Roaming\Typora\typora-user-images\1558338552015.png" alt="1558338552015"></p>
<p>第一版存在的问题</p>
<blockquote>
<p>1.针对特定数据实现，只能分为两个cluster，不具有普遍性</p>
<p>2.随机生成质心部分，我采取了简略的办法，直接返回两个点</p>
<p>3.算法停止的条件是质心稳定，执行效率低</p>
</blockquote>
<h3 id="0x02-第二版代码"><a href="#0x02-第二版代码" class="headerlink" title="0x02 第二版代码"></a>0x02 第二版代码</h3><blockquote>
<p>针对第一版的问题的解决</p>
<p>1.修改rand_center函数，使其根据参数k返回相应个数的质心，使其更加普遍</p>
<p>2.修改函数结构及逻辑</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">data = [[<span class="number">0.</span>,<span class="number">0.</span>],[<span class="number">0.</span>,<span class="number">1.</span>],[<span class="number">1.</span>,<span class="number">0.</span>],[<span class="number">1.</span>,<span class="number">1.</span>],</span><br><span class="line">        [<span class="number">5.</span>,<span class="number">5.</span>],[<span class="number">5.</span>,<span class="number">6.</span>],[<span class="number">6.</span>,<span class="number">5.</span>],[<span class="number">6.</span>,<span class="number">6.</span>]]</span><br><span class="line"></span><br><span class="line">data = np.array(data)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 随机生成k个中心</span></span><br><span class="line"><span class="string"># 计算每个点到两个质心的距离并归属到距离小的cluster</span></span><br><span class="line"><span class="string"># 计算每个cluster的质心并改变</span></span><br><span class="line"><span class="string"># 再次重复2、3步直至稳定</span></span><br><span class="line"><span class="string"># 输出结果</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">size = <span class="built_in">len</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在给定数据范围内随机产生k个簇心，作为初始的簇。随机数都在给定数据的范围之内dmin + (dmax - dmin) * np.random.rand(k)实现。</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rand_center</span>(<span class="params">data,k</span>):</span></span><br><span class="line">    n = data.shape[<span class="number">1</span>]  <span class="comment"># features</span></span><br><span class="line">    centroids = np.zeros((k, n))  <span class="comment"># init with (0,0)....</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        dmin, dmax = np.<span class="built_in">min</span>(data[:, i]), np.<span class="built_in">max</span>(data[:, i])</span><br><span class="line">        centroids[:, i] = dmin + (dmax - dmin) * np.random.rand(k)</span><br><span class="line">    <span class="keyword">return</span> centroids</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">distance</span>(<span class="params">data0,data1</span>):</span></span><br><span class="line">    tmp = np.<span class="built_in">sum</span>((data0-data1)**<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> np.sqrt(tmp)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kmean</span>(<span class="params">data,k=<span class="number">2</span></span>):</span></span><br><span class="line">    center = rand_center(data,k)</span><br><span class="line">    Notstable = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> Notstable:</span><br><span class="line">        Notstable = <span class="literal">False</span></span><br><span class="line">        cluster =[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size)]</span><br><span class="line">        <span class="comment"># 计算每个点所属的cluster</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">            min_distance = sys.float_info.<span class="built_in">max</span></span><br><span class="line">            cluster_sign = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">                cluster_sign= cluster_sign <span class="keyword">if</span> min_distance&lt;distance(data[i],center[j]) <span class="keyword">else</span> j</span><br><span class="line">                min_distance = min_distance <span class="keyword">if</span> min_distance&lt;distance(data[i],center[j]) <span class="keyword">else</span> distance(data[i],center[j])</span><br><span class="line">            cluster[i]=cluster_sign</span><br><span class="line">        </span><br><span class="line">        <span class="comment">#计算新的质心</span></span><br><span class="line">        <span class="built_in">print</span> cluster</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">            data_x = <span class="number">0.</span></span><br><span class="line">            data_y = <span class="number">0.</span></span><br><span class="line">            data_center_x = <span class="number">0.</span></span><br><span class="line">            data_center_y = <span class="number">0.</span></span><br><span class="line">            data_num = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">                <span class="keyword">if</span>(cluster[j]==i):</span><br><span class="line">                    <span class="built_in">print</span> cluster[j]</span><br><span class="line">                    data_x = data_x+data[j][<span class="number">0</span>]</span><br><span class="line">                    data_y = data_y+data[j][<span class="number">1</span>]</span><br><span class="line">                    data_num += <span class="number">1</span></span><br><span class="line">            <span class="built_in">print</span> data_num</span><br><span class="line">            data_center_x = <span class="built_in">float</span>(data_x/data_num)</span><br><span class="line">            data_center_y = <span class="built_in">float</span>(data_y/data_num)</span><br><span class="line">            <span class="keyword">if</span>(center[i][<span class="number">0</span>]!=data_center_x <span class="keyword">or</span> center[i][<span class="number">1</span>]!=data_center_y):</span><br><span class="line">                Notstable = <span class="literal">True</span></span><br><span class="line">                center[i][<span class="number">0</span>]=data_center_x</span><br><span class="line">                center[i][<span class="number">1</span>]=data_center_y</span><br><span class="line">    <span class="keyword">return</span> center,cluster</span><br><span class="line">            </span><br><span class="line"><span class="built_in">print</span> kmean(data,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>第二版代码存在的问题</p>
<blockquote>
<p>1.因为质心初始化的随机性，存在局部收敛，每次运行结果可能不同</p>
<p>2.有时候某个质心可能并未分到任何一个点，函数会报错（data_num==0不能做分母）</p>
</blockquote>
<h3 id="0x03-第三版代码"><a href="#0x03-第三版代码" class="headerlink" title="0x03 第三版代码"></a>0x03 第三版代码</h3><blockquote>
<p>解决方案：多次运行取最优值 / 采取更好的质心生成办法（方法见K-means调研）</p>
<p>这里我采取的办法是多次运行取最优值（易于实现且能实现更好的效果）</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">data = [[<span class="number">0.</span>,<span class="number">0.</span>],[<span class="number">0.</span>,<span class="number">1.</span>],[<span class="number">1.</span>,<span class="number">0.</span>],[<span class="number">1.</span>,<span class="number">1.</span>],</span><br><span class="line">        [<span class="number">5.</span>,<span class="number">5.</span>],[<span class="number">5.</span>,<span class="number">6.</span>],[<span class="number">6.</span>,<span class="number">5.</span>],[<span class="number">6.</span>,<span class="number">6.</span>]]</span><br><span class="line"></span><br><span class="line">data = np.array(data)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 随机生成k个中心</span></span><br><span class="line"><span class="string"># 计算每个点到两个质心的距离并归属到距离小的cluster</span></span><br><span class="line"><span class="string"># 计算每个cluster的质心并改变</span></span><br><span class="line"><span class="string"># 再次重复2、3步直至稳定</span></span><br><span class="line"><span class="string"># 输出结果</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">size = <span class="built_in">len</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在给定数据范围内随机产生k个簇心，作为初始的簇。随机数都在给定数据的范围之内dmin + (dmax - dmin) * np.random.rand(k)实现。</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rand_center</span>(<span class="params">data,k</span>):</span></span><br><span class="line">    n = data.shape[<span class="number">1</span>]  <span class="comment"># features</span></span><br><span class="line">    centroids = np.zeros((k, n))  <span class="comment"># init with (0,0)....</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        dmin, dmax = np.<span class="built_in">min</span>(data[:, i]), np.<span class="built_in">max</span>(data[:, i])</span><br><span class="line">        centroids[:, i] = dmin + (dmax - dmin) * np.random.rand(k)</span><br><span class="line">    <span class="keyword">return</span> centroids</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">distance</span>(<span class="params">data0,data1</span>):</span></span><br><span class="line">    tmp = np.<span class="built_in">sum</span>((data0-data1)**<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> np.sqrt(tmp)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kmean</span>(<span class="params">data,k=<span class="number">2</span></span>):</span></span><br><span class="line">    center = rand_center(data,k)</span><br><span class="line">    Notstable = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> Notstable:</span><br><span class="line">        Notstable = <span class="literal">False</span></span><br><span class="line">        cluster =[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size)]<span class="comment"># 记录每个点所属的质心</span></span><br><span class="line">        distances = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size)]<span class="comment"># 记录每个点到其质心的距离</span></span><br><span class="line">        <span class="comment"># 计算每个点所属的cluster</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">            min_distance = sys.float_info.<span class="built_in">max</span></span><br><span class="line">            cluster_sign = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">                cluster_sign= cluster_sign <span class="keyword">if</span> min_distance&lt;distance(data[i],center[j]) <span class="keyword">else</span> j</span><br><span class="line">                min_distance = min_distance <span class="keyword">if</span> min_distance&lt;distance(data[i],center[j]) <span class="keyword">else</span> distance(data[i],center[j])</span><br><span class="line">            cluster[i]=cluster_sign</span><br><span class="line">            distances[i]=min_distance</span><br><span class="line">        </span><br><span class="line">        <span class="comment">#计算新的质心</span></span><br><span class="line">        <span class="built_in">print</span> cluster</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">            data_x = <span class="number">0.</span></span><br><span class="line">            data_y = <span class="number">0.</span></span><br><span class="line">            data_center_x = <span class="number">0.</span></span><br><span class="line">            data_center_y = <span class="number">0.</span></span><br><span class="line">            data_num = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">                <span class="keyword">if</span>(cluster[j]==i):</span><br><span class="line">                    <span class="built_in">print</span> cluster[j]</span><br><span class="line">                    data_x = data_x+data[j][<span class="number">0</span>]</span><br><span class="line">                    data_y = data_y+data[j][<span class="number">1</span>]</span><br><span class="line">                    data_num += <span class="number">1</span></span><br><span class="line">            <span class="built_in">print</span> data_num</span><br><span class="line">            data_center_x = <span class="built_in">float</span>(data_x/data_num)</span><br><span class="line">            data_center_y = <span class="built_in">float</span>(data_y/data_num)</span><br><span class="line">            <span class="keyword">if</span>(center[i][<span class="number">0</span>]!=data_center_x <span class="keyword">or</span> center[i][<span class="number">1</span>]!=data_center_y):</span><br><span class="line">                Notstable = <span class="literal">True</span></span><br><span class="line">                center[i][<span class="number">0</span>]=data_center_x</span><br><span class="line">                center[i][<span class="number">1</span>]=data_center_y</span><br><span class="line">    <span class="keyword">return</span> center,cluster,np.<span class="built_in">sum</span>(distances)</span><br><span class="line">            </span><br><span class="line"><span class="comment">#print kmean(data,2)</span></span><br><span class="line"><span class="comment">#多次运行求最佳值</span></span><br><span class="line">best_assement = np.inf</span><br><span class="line">best_center = <span class="literal">None</span></span><br><span class="line">best_cluster = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    center,cluster,assement = kmean(data,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> assement &lt; best_assement:</span><br><span class="line">        best_assement = assement</span><br><span class="line">        best_center = center</span><br><span class="line">        best_cluster = cluster</span><br><span class="line"><span class="built_in">print</span> best_center,best_cluster</span><br></pre></td></tr></table></figure>





<h3 id="0x04-测试"><a href="#0x04-测试" class="headerlink" title="0x04 测试"></a>0x04 测试</h3><p>调用iris数据集做测试</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line">X, y = iris.data, iris.target</span><br><span class="line">data = X[:,[<span class="number">1</span>,<span class="number">3</span>]]</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">data = [[0.,0.],[0.,1.],[1.,0.],[1.,1.],</span></span><br><span class="line"><span class="string">        [5.,5.],[5.,6.],[6.,5.],[6.,6.]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">data = np.array(data)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 随机生成k个中心</span></span><br><span class="line"><span class="string"># 计算每个点到两个质心的距离并归属到距离小的cluster</span></span><br><span class="line"><span class="string"># 计算每个cluster的质心并改变</span></span><br><span class="line"><span class="string"># 再次重复2、3步直至稳定</span></span><br><span class="line"><span class="string"># 输出结果</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">size = <span class="built_in">len</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在给定数据范围内随机产生k个簇心，作为初始的簇。随机数都在给定数据的范围之内dmin + (dmax - dmin) * np.random.rand(k)实现。</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rand_center</span>(<span class="params">data,k</span>):</span></span><br><span class="line">    n = data.shape[<span class="number">1</span>]  <span class="comment"># features</span></span><br><span class="line">    centroids = np.zeros((k, n))  <span class="comment"># init with (0,0)....</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        dmin, dmax = np.<span class="built_in">min</span>(data[:, i]), np.<span class="built_in">max</span>(data[:, i])</span><br><span class="line">        centroids[:, i] = dmin + (dmax - dmin) * np.random.rand(k)</span><br><span class="line">    <span class="keyword">return</span> centroids</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">distance</span>(<span class="params">data0,data1</span>):</span></span><br><span class="line">    tmp = np.<span class="built_in">sum</span>((data0-data1)**<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> np.sqrt(tmp)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kmean</span>(<span class="params">data,k=<span class="number">2</span></span>):</span></span><br><span class="line">    center = rand_center(data,k)</span><br><span class="line">    Notstable = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> Notstable:</span><br><span class="line">        Notstable = <span class="literal">False</span></span><br><span class="line">        cluster =[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size)]</span><br><span class="line">        distances = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size)]</span><br><span class="line">        <span class="comment"># 计算每个点所属的cluster</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">            min_distance = sys.float_info.<span class="built_in">max</span></span><br><span class="line">            cluster_sign = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">                cluster_sign= cluster_sign <span class="keyword">if</span> min_distance&lt;distance(data[i],center[j]) <span class="keyword">else</span> j</span><br><span class="line">                min_distance = min_distance <span class="keyword">if</span> min_distance&lt;distance(data[i],center[j]) <span class="keyword">else</span> distance(data[i],center[j])</span><br><span class="line">            cluster[i]=cluster_sign</span><br><span class="line">            distances[i]=min_distance</span><br><span class="line">        </span><br><span class="line">        <span class="comment">#计算新的质心</span></span><br><span class="line">        <span class="comment">#print cluster</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">            data_x = <span class="number">0.</span></span><br><span class="line">            data_y = <span class="number">0.</span></span><br><span class="line">            data_center_x = <span class="number">0.</span></span><br><span class="line">            data_center_y = <span class="number">0.</span></span><br><span class="line">            data_num = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(size):</span><br><span class="line">                <span class="keyword">if</span>(cluster[j]==i):</span><br><span class="line">                    <span class="comment">#print cluster[j]</span></span><br><span class="line">                    data_x = data_x+data[j][<span class="number">0</span>]</span><br><span class="line">                    data_y = data_y+data[j][<span class="number">1</span>]</span><br><span class="line">                    data_num += <span class="number">1</span></span><br><span class="line">            <span class="comment">#print data_num</span></span><br><span class="line">            data_center_x = <span class="built_in">float</span>(data_x/data_num)</span><br><span class="line">            data_center_y = <span class="built_in">float</span>(data_y/data_num)</span><br><span class="line">            <span class="keyword">if</span>(center[i][<span class="number">0</span>]!=data_center_x <span class="keyword">or</span> center[i][<span class="number">1</span>]!=data_center_y):</span><br><span class="line">                Notstable = <span class="literal">True</span></span><br><span class="line">                center[i][<span class="number">0</span>]=data_center_x</span><br><span class="line">                center[i][<span class="number">1</span>]=data_center_y</span><br><span class="line">    <span class="keyword">return</span> center,cluster,np.<span class="built_in">sum</span>(distances)</span><br><span class="line">            </span><br><span class="line"><span class="comment">#print kmean(data,2)</span></span><br><span class="line">best_assement = np.inf</span><br><span class="line">best_center = <span class="literal">None</span></span><br><span class="line">best_cluster = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    center,cluster,assement = kmean(data,<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">if</span> assement &lt; best_assement:</span><br><span class="line">        best_assement = assement</span><br><span class="line">        best_center = center</span><br><span class="line">        best_cluster = cluster</span><br><span class="line"><span class="built_in">print</span>(best_center,best_cluster)</span><br></pre></td></tr></table></figure>



<p>测试结果</p>
<p><img src="C:\Users\13638\AppData\Roaming\Typora\typora-user-images\1558341551080.png" alt="1558341551080"></p>
<p>存在的问题</p>
<blockquote>
<p>因为我在重新计算质心时采用了<code>data_center_x = float(data_x/data_num)</code></p>
<p>而在计算过程中data_num可能会为0导致报错</p>
</blockquote>
<p>解决方案</p>
<blockquote>
<p>直接调用np.mean计算质心 或者 将其分类讨论（见k-means调研中对空聚类的处理）</p>
</blockquote>
<h3 id="0x05-总结"><a href="#0x05-总结" class="headerlink" title="0x05 总结"></a>0x05 总结</h3><ul>
<li>自己写了一遍之后印象更加深刻，理解也更进一步。尤其是在更新代码一步步解决问题时，更能感受到聚类思想的代码实现方案。</li>
<li>现在写出来的代码还是不够看的水平，时间还是不够多，不能将代码更进一步优化。</li>
<li>在调研的过程中也看到了许多大神写的代码以及他们对于各种问题的解决方案，再看看自己的代码，差距就体现出来了。</li>
<li>还有一个原因是对于numpy库的学习还是不够，别人调用库里一个函数的事情，自己要写很长一串代码来实现。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/05/20/2019-05-20-K-Means%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/20/2019-05-20-K-Means%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">K-Means聚类算法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-20 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-20T00:00:00+08:00">2019-05-20</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x01-K-Means聚类算法是什么"><a href="#0x01-K-Means聚类算法是什么" class="headerlink" title="0x01 K-Means聚类算法是什么"></a>0x01 K-Means聚类算法是什么</h3><p>K-Means算法是典型的基于距离的非层次聚类算法，在最小化误差函数的基础上将数据划分为预定的类数K，采用距离作为相似性的评价指标，即认为两个对象的距离越近，其相似度就越大。</p>
<h3 id="0x02-k-means算法基本步骤"><a href="#0x02-k-means算法基本步骤" class="headerlink" title="0x02 k-means算法基本步骤"></a>0x02 k-means算法基本步骤</h3><ol>
<li>随机的取 k 个点作为 k 个初始质心；</li>
<li>计算其他点到这个 k 个质心的距离；</li>
<li>如果某个点 p 离第 n 个质心的距离更近，则该点属于 cluster n，并对其打标签，标注 point p.label=n，其中 n&lt;=k；</li>
<li>计算同一 cluster 中，也就是相同 label 的点向量的平均值，作为新的质心；</li>
<li>迭代至所有质心都不变化为止，即算法结束。</li>
</ol>
<h3 id="0x03-重要的假设"><a href="#0x03-重要的假设" class="headerlink" title="0x03 重要的假设"></a>0x03 重要的假设</h3><p>数据之间的相似度可以使用欧氏距离度量<strong>，如果不能使用欧氏距离度量，要先把数据转换到能用欧氏距离度量，</strong>这一点很重要<strong>。<br>（注：</strong>可以使用欧氏距离度量<strong>的意思就是欧氏距离越小，两个数据相似度越高）</strong></p>
<h3 id="0x04-K值的估计方法"><a href="#0x04-K值的估计方法" class="headerlink" title="0x04  K值的估计方法"></a>0x04  K值的估计方法</h3><p>1.平均直径法。首先视所有的点为一个大的整体 cluster，计算所有点之间距离的平均值作为该 cluster 的平均直径。选择初始质心的时候，先选择最远的两个点，接下来从这最两个点开始，与这最两个点距离都很远的点（远的程度为，该点到之前选择的最远的两个点的距离都大于整体 cluster 的平均直径）可视为新发现的质心，否则不视之为质心。设想一下，如果利用平均半径或平均直径这一个指标，若我们猜想的 K 值大于或等于真实的 K 值，也就是簇的真实数目，那么该指标的上升趋势会很缓慢，但是如果我们给出的 K 值小于真实的簇的数目时，这个指标一定会急剧上升。<br>根据这样的估算思想，我们就能估计出正确的 k 值，并且得到 k 个初始质心，接着，我们便根据上述算法流程继续进行迭代，直到所有质心都不变化，从而成功实现算法</p>
<p>2.多次运行，每次使用一组不同的随机初始质心，然后选取具有最小SSE（误差的平方和）的簇集。这种策略简单，但是效果可能不好，这取决于数据集和寻找的簇的个数。</p>
<p>3.取一个样本，并使用层次聚类技术对它聚类。从层次聚类中提取K个簇，并用这些簇的质心作为初始质心。该方法通常很有效，但仅对下列情况有效：样本相对较小；K相对于样本大小较小。</p>
<p>4.取所有点的质心作为第一个点。然后，对于每个后继初始质心，选择离已经选取过的初始质心最远的点。使用这种方法，确保了选择的初始质心不仅是随机的，而且是散开的。但是，这种方法可能选中离群点。</p>
<h3 id="0x05-算法停止的条件"><a href="#0x05-算法停止的条件" class="headerlink" title="0x05 算法停止的条件"></a>0x05 算法停止的条件</h3><p>k 均值总是收敛的，也就是说，k 均值算法一定会达到一种稳定状态，在此状态下，所有的点都不会从一个簇转移到另一个簇，因此质心不在发生改变。在此，我们引出一个剪枝优化，即：k 均值最明显的收敛过程会发生在算法运行的前期阶段，故在某些情况下为了增加算法的执行效率，我们可以替换上述算法的第五步，**采用“迭代至仅有 1%<del>3%的点在影响质心”或“迭代至仅有 1%</del>3%的点在改变簇”。</p>
<h3 id="0x06-距离的度量"><a href="#0x06-距离的度量" class="headerlink" title="0x06 距离的度量"></a>0x06 距离的度量</h3><p>　　常用的距离度量方法包括：欧几里得距离和余弦相似度。欧几里得距离度量会受指标不同单位刻度的影响，所以一般需要先进行标准化，同时距离越大，个体间差异越大；空间向量余弦夹角的相似度度量不会受指标刻度的影响，余弦值落于区间[-1,1]，值越大，差异越小。</p>
<h3 id="0x07-空聚类的处理"><a href="#0x07-空聚类的处理" class="headerlink" title="0x07 空聚类的处理"></a>0x07 空聚类的处理</h3><p>　　如果所有的点在指派步骤都未分配到某个簇，就会得到空簇。如果这种情况发生，则需要某种策略来选择一个替补质心，否则的话，平方误差将会偏大。</p>
<p>　　（1）选择一个距离当前任何质心最远的点。这将消除当前对总平方误差影响最大的点。</p>
<p>　　（2）从具有最大SSE的簇中选择一个替补的质心，这将分裂簇并降低聚类的总SSE。如果有多个空簇，则该过程重复多次。</p>
<h3 id="0x08-形象解释：牧师：村民模型"><a href="#0x08-形象解释：牧师：村民模型" class="headerlink" title="0x08 形象解释：牧师：村民模型"></a>0x08 形象解释：牧师：村民模型</h3><p>有四个牧师去郊区布道，一开始牧师们随意选了几个布道点，并且把这几个布道点的情况公告给了郊区所有的居民，于是每个居民到离自己家最近的布道点去听课。<br>听课之后，大家觉得距离太远了，于是每个牧师统计了一下自己的课上所有的居民的地址，搬到了所有地址的中心地带，并且在海报上更新了自己的布道点的位置。<br>牧师每一次移动不可能离所有人都更近，有的人发现A牧师移动以后自己还不如去B牧师处听课更近，于是每个居民又去了离自己最近的布道点……<br>就这样，牧师每个礼拜更新自己的位置，居民根据自己的情况选择布道点，最终稳定了下</p>
<h3 id="0x09-优缺点"><a href="#0x09-优缺点" class="headerlink" title="0x09 优缺点"></a>0x09 优缺点</h3><p>K-Means的主要优点有：</p>
<blockquote>
<p>　　　　1）原理比较简单，实现也是很容易，收敛速度快。</p>
<p>　　　　2）聚类效果较优。</p>
<p>　　　　3）算法的可解释度比较强。</p>
<p>　　　　4）主要需要调参的参数仅仅是簇数k。</p>
</blockquote>
<p>K-Means的主要缺点有：</p>
<blockquote>
<p>　　　　1）K值的选取不好把握</p>
<p>　　　　2）对于不是凸的数据集比较难收敛</p>
<p>　　　　3）如果各隐含类别的数据不平衡，比如各隐含类别的数据量严重失衡，或者各隐含类别的方差不同，则聚类效果不佳。</p>
<p>　　　　4） 采用迭代方法，得到的结果只是局部最优。</p>
<p>　　　　5） 对噪音和异常点比较的敏感。</p>
</blockquote>
<h3 id="0x10-Refer"><a href="#0x10-Refer" class="headerlink" title="0x10  Refer"></a>0x10  Refer</h3><p><a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/analytics/library/ba-1607-clustering-algorithm/index.html">https://www.ibm.com/developerworks/cn/analytics/library/ba-1607-clustering-algorithm/index.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/pinard/p/6164214.html">https://www.cnblogs.com/pinard/p/6164214.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dashenghuahua/article/details/53160546">https://blog.csdn.net/dashenghuahua/article/details/53160546</a></p>
<p><a target="_blank" rel="noopener" href="https://seancheney.gitbook.io/python-for-data-analysis-2nd/di-04-zhang-numpy-ji-chu-shu-zu-he-shi-liang-ji-suan">https://seancheney.gitbook.io/python-for-data-analysis-2nd/di-04-zhang-numpy-ji-chu-shu-zu-he-shi-liang-ji-suan</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/csuldw/MachineLearning/tree/master/Kmeans">https://github.com/csuldw/MachineLearning/tree/master/Kmeans</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_26917383/article/details/70240628">https://blog.csdn.net/sinat_26917383/article/details/70240628</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/05/16/2019-05-16-%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/16/2019-05-16-%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/" class="post-title-link" itemprop="url">聚类算法分类</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-16 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-16T00:00:00+08:00">2019-05-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>基于划分聚类算法（partition clustering)</p>
<table>
<thead>
<tr>
<th>k-means：</th>
<th align="left">是一种典型的划分聚类算法，它用一个聚类的中心来代表一个簇，即在迭代过程中选择的聚点不一定是聚类中的一个点，该算法只能处理数值型数据</th>
</tr>
</thead>
<tbody><tr>
<td>k-modes：</td>
<td align="left">K-Means算法的扩展，采用简单匹配方法来度量分类型数据的相似度</td>
</tr>
<tr>
<td>k-prototypes：</td>
<td align="left">结合了K-Means和K-Modes两种算法，能够处理混合型数据</td>
</tr>
<tr>
<td>k-medoids：</td>
<td align="left">在迭代过程中选择簇中的某点作为聚点，PAM是典型的k-medoids算法</td>
</tr>
<tr>
<td>CLARA：</td>
<td align="left">CLARA算法在PAM的基础上采用了抽样技术，能够处理大规模数据</td>
</tr>
<tr>
<td>CLARANS：</td>
<td align="left">CLARANS算法融合了PAM和CLARA两者的优点，是第一个用于空间数据库的聚类算法</td>
</tr>
<tr>
<td>Focused CLARAN：</td>
<td align="left">采用了空间索引技术提高了CLARANS算法的效率</td>
</tr>
<tr>
<td>PCM：</td>
<td align="left">模糊集合理论引入聚类分析中并提出了PCM模糊聚类算法</td>
</tr>
</tbody></table>
<p>基于层次聚类算法：</p>
<table>
<thead>
<tr>
<th>CURE：</th>
<th>采用抽样技术先对数据集D随机抽取样本，再采用分区技术对样本进行分区，然后对每个分区局部聚类，最后对局部聚类进行全局聚类</th>
</tr>
</thead>
<tbody><tr>
<td>ROCK：</td>
<td>也采用了随机抽样技术，该算法在计算两个对象的相似度时，同时考虑了周围对象的影响</td>
</tr>
<tr>
<td>CHEMALOEN（变色龙算法）：</td>
<td>首先由数据集构造成一个K-最近邻图Gk ,再通过一个图的划分算法将图Gk 划分成大量的子图,每个子图代表一个初始子簇,最后用一个凝聚的层次聚类算法反复合并子簇，找到真正的结果簇</td>
</tr>
<tr>
<td>SBAC：</td>
<td>SBAC算法则在计算对象间相似度时，考虑了属性特征对于体现对象本质的重要程度，对于更能体现对象本质的属性赋予较高的权值</td>
</tr>
<tr>
<td>BIRCH：</td>
<td>BIRCH算法利用树结构对数据集进行处理，叶结点存储一个聚类，用中心和半径表示，顺序处理每一个对象，并把它划分到距离最近的结点，该算法也可以作为其他聚类算法的预处理过程</td>
</tr>
<tr>
<td>BUBBLE：</td>
<td>BUBBLE算法则把BIRCH算法的中心和半径概念推广到普通的距离空间</td>
</tr>
<tr>
<td>BUBBLE-FM：</td>
<td>BUBBLE-FM算法通过减少距离的计算次数，提高了BUBBLE算法的效率</td>
</tr>
</tbody></table>
<p>基于密度聚类算法：</p>
<table>
<thead>
<tr>
<th>DBSCAN：</th>
<th>DBSCAN算法是一种典型的基于密度的聚类算法，该算法采用空间索引技术来搜索对象的邻域，引入了“核心对象”和“密度可达”等概念，从核心对象出发，把所有密度可达的对象组成一个簇</th>
</tr>
</thead>
<tbody><tr>
<td>GDBSCAN：</td>
<td>算法通过泛化DBSCAN算法中邻域的概念，以适应空间对象的特点</td>
</tr>
<tr>
<td>DBLASD：</td>
<td></td>
</tr>
<tr>
<td>OPTICS：</td>
<td>OPTICS算法结合了聚类的自动性和交互性，先生成聚类的次序，可以对不同的聚类设置不同的参数，来得到用户满意的结果</td>
</tr>
<tr>
<td>FDC：</td>
<td>FDC算法通过构造k-d tree把整个数据空间划分成若干个矩形空间，当空间维数较少时可以大大提高DBSCAN的效率</td>
</tr>
</tbody></table>
<p>基于网格的聚类算法：</p>
<table>
<thead>
<tr>
<th>STING：</th>
<th>利用网格单元保存数据统计信息，从而实现多分辨率的聚类</th>
</tr>
</thead>
<tbody><tr>
<td>WaveCluster：</td>
<td>在聚类分析中引入了小波变换的原理，主要应用于信号处理领域。（备注：小波算法在信号处理，图形图像，加密解密等领域有重要应用，是一种比较高深和牛逼的东西）</td>
</tr>
<tr>
<td>CLIQUE：</td>
<td>是一种结合了网格和密度的聚类算法</td>
</tr>
<tr>
<td>OPTIGRID：</td>
<td></td>
</tr>
</tbody></table>
<p>基于神经网络的聚类算法：</p>
<table>
<thead>
<tr>
<th>自组织神经网络SOM：</th>
<th>该方法的基本思想是–由外界输入不同的样本到人工的自组织映射网络中，一开始时，输入样本引起输出兴奋细胞的位置各不相同，但自组织后会形成一些细胞群，它们分别代表了输入样本，反映了输入样本的特征</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>基于统计学的聚类算法：</p>
<table>
<thead>
<tr>
<th>COBWeb：</th>
<th>COBWeb是一个通用的概念聚类方法，它用分类树的形式表现层次聚类</th>
</tr>
</thead>
<tbody><tr>
<td>CLASSIT：</td>
<td></td>
</tr>
<tr>
<td>AutoClass：</td>
<td>是以概率混合模型为基础，利用属性的概率分布来描述聚类，该方法能够处理混合型的数据，但要求各属性相互独立</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/05/12/2019-05-12-%E9%98%BF%E9%87%8C%E4%BA%91oss+PicGo%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/12/2019-05-12-%E9%98%BF%E9%87%8C%E4%BA%91oss+PicGo%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A/" class="post-title-link" itemprop="url">阿里云oss+PicGo搭建图床</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-12 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-12T00:00:00+08:00">2019-05-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h3><p>主要介绍使用阿里云搭建图床以及配置PicGo方便上传</p>
<p>本来看网上全部推荐七牛云，准备用七牛的，但是域名还必须要公安部备案，嫌麻烦，使用了阿里。当然国内可供选择的还有很多，大家根据自己的需要选择</p>
<h3 id="0x01-使用阿里云OSS搭建图床"><a href="#0x01-使用阿里云OSS搭建图床" class="headerlink" title="0x01 使用阿里云OSS搭建图床"></a>0x01 使用阿里云OSS搭建图床</h3><p>流程</p>
<p>开通对象存储服务OSS–&gt;购买–&gt;创建bucket</p>
<p>关于阿里的收费组成比较复杂，<a target="_blank" rel="noopener" href="https://www.aliyun.com/price/product?spm=5176.7933691.744462.c1.79ba6a56EQXVX5#/oss/detail">自行参考此链接</a></p>
<p><a target="_blank" rel="noopener" href="https://cn.aliyun.com/product/oss">阿里云对象存储服务OSS链接</a></p>
<p>进入折扣套餐</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190708190316.png"></p>
<p>按照个人需求选取对应套餐</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190708190339.png"></p>
<p>购买完毕后新建bucket</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190708190632.png"></p>
<p>注意这里读写权限为<strong>公共读</strong></p>
<p>创建完毕之后就可以进入bucket控制台进行操作</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190708190904.png"></p>
<h3 id="0x02-使用PicGo简化上传"><a href="#0x02-使用PicGo简化上传" class="headerlink" title="0x02  使用PicGo简化上传"></a>0x02  使用PicGo简化上传</h3><p>PicGo基本支持所有的主流图床：七牛、腾讯云COS、阿里云OSS、github、imgur、sm.ms等</p>
<p>支持macOS、windows64、linux</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/PicGo">github链接</a></p>
<p><a target="_blank" rel="noopener" href="https://molunerfinn.com/PicGo/">官网链接</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/PicGo/releases">下载链接</a></p>
<p>下载安装之后点击  图床设置–&gt;阿里云OSS  配置参照下图</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190708191721.png"></p>
<ul>
<li><p>accesskey和accesskeySecret可以从阿里云控制台获取</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190708191844.png"></p>
</li>
<li><p>存储空间是bucket名称</p>
</li>
<li><p>存储区域参考bucket控制台中的访问域名</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/05/01/2019-05-01-%E5%9F%BA%E4%BA%8E%E8%8D%B7%E5%85%B0%E5%9B%BD%E6%97%97%E6%80%9D%E6%83%B3%E7%9A%84%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/01/2019-05-01-%E5%9F%BA%E4%BA%8E%E8%8D%B7%E5%85%B0%E5%9B%BD%E6%97%97%E6%80%9D%E6%83%B3%E7%9A%84%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/" class="post-title-link" itemprop="url">基于荷兰国旗思想的快速排序</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-01 00:00:00" itemprop="dateCreated datePublished" datetime="2019-05-01T00:00:00+08:00">2019-05-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>上篇博客介绍了荷兰国旗思想，那么我们利用荷兰国旗对经典快排进行改进。</p>
<p>经典快排每次以最后一个数字作为划分，划分出小于等于区域和大于区域两块，这样每次只能确定最后一个数字的位置（即使数组中有其他等于最后一个数字的数字也只能确定最后一个数字的位置）</p>
<p>但是利用荷兰国旗思想就可以划分出小于、等于、大于三个区域，这样每次就确定了等于部分的区域（可能是一个数字，也可能是多个数字）</p>
<p>再分别对小于和大于区域继续进行排序（分治思想）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">quicksort</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] array=&#123;<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">3</span>&#125;;</span><br><span class="line">        quicksort(array);</span><br><span class="line">        printArray(array);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printArray</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (arr == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quicksort</span><span class="params">(<span class="keyword">int</span>[] array)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array==<span class="keyword">null</span> || array.length&lt;<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        quicksort(array,<span class="number">0</span>,array.length-<span class="number">1</span>);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quicksort</span><span class="params">(<span class="keyword">int</span>[] test, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l&lt;r)&#123;</span><br><span class="line">            <span class="keyword">int</span>[] result = partition(test,l,r);</span><br><span class="line">            quicksort(test,l,result[<span class="number">0</span>]-<span class="number">1</span>);</span><br><span class="line">            quicksort(test,result[<span class="number">1</span>]+<span class="number">1</span>,r);</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] partition(<span class="keyword">int</span>[] arr , <span class="keyword">int</span> l , <span class="keyword">int</span> r)&#123;</span><br><span class="line">        <span class="keyword">int</span> less = l-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> more = r+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> cur = l;</span><br><span class="line">        <span class="keyword">int</span> num = arr[r];</span><br><span class="line">        <span class="keyword">while</span> (cur!=more)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[cur]&lt;num)&#123;</span><br><span class="line">                swap(arr,less+<span class="number">1</span>,cur);</span><br><span class="line">                less++;</span><br><span class="line">                cur++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(arr[cur]==num)&#123;</span><br><span class="line">                cur++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                swap(arr,cur,more-<span class="number">1</span>);</span><br><span class="line">                more--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;less+<span class="number">1</span>,more-<span class="number">1</span>&#125;;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = arr[a];</span><br><span class="line">        arr[a]=arr[b];</span><br><span class="line">        arr[b]=temp;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2019/04/14/2019-04-14-%E8%8D%B7%E5%85%B0%E5%9B%BD%E6%97%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/14/2019-04-14-%E8%8D%B7%E5%85%B0%E5%9B%BD%E6%97%97/" class="post-title-link" itemprop="url">荷兰国旗</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-14 00:00:00" itemprop="dateCreated datePublished" datetime="2019-04-14T00:00:00+08:00">2019-04-14</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x01-荷兰国旗问题"><a href="#0x01-荷兰国旗问题" class="headerlink" title="0x01 荷兰国旗问题"></a>0x01 荷兰国旗问题</h3><p>给定一个内含n个由红色、白色和蓝色对象组成的数组，对这些对象进行排序。在本题中，红色用0表示，白色用1表示，蓝色用2表示。</p>
<p>题目另一种形式 一个数组，再给定一个数字num   小于该数字的放左边  大于放右边  等于放中间（以此在后面引出经典快排的思想）</p>
<h3 id="0x02-思路"><a href="#0x02-思路" class="headerlink" title="0x02 思路"></a>0x02 思路</h3><p>题目形式虽有变化，但是思想都是一样的</p>
<p>可以设置三个指针   less  more   cur</p>
<p>cur指向当前需要判定的数字</p>
<p>less more  分别指向小数区域末尾  大数区域开头</p>
<p>所以整个数组分成四部分</p>
<blockquote>
<p>0–less                小数区域</p>
<p>less+1–cur-1        等数区域</p>
<p>cur–more-1          待判别区域</p>
<p>more–结尾           大数区域</p>
</blockquote>
<p>这样每次判别cur与给定num的大小进行相应的操作</p>
<h3 id="0x03-代码实现"><a href="#0x03-代码实现" class="headerlink" title="0x03 代码实现"></a>0x03 代码实现</h3><p>具体代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] partition(<span class="keyword">int</span>[] test,<span class="keyword">int</span> L,<span class="keyword">int</span> R, <span class="keyword">int</span> num)&#123;</span><br><span class="line">    <span class="keyword">int</span> less = L-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> more = R+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> cur = L;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(cur!=more)&#123;</span><br><span class="line">        <span class="keyword">if</span>(test[cur]&lt;num)&#123;<span class="comment">//小于</span></span><br><span class="line">            swap(test,less+<span class="number">1</span>,cur);</span><br><span class="line">            less++;</span><br><span class="line">            cur++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(test[cur]==num)&#123;<span class="comment">//等于</span></span><br><span class="line">            cur++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;<span class="comment">//大于</span></span><br><span class="line">            swap(test,cur,more-<span class="number">1</span>);</span><br><span class="line">            more--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; less + <span class="number">1</span>, more - <span class="number">1</span> &#125;;<span class="comment">//最后返回的是等于区域的开头、结尾坐标</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] test,<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = test[a];</span><br><span class="line">    test[a]=test[b];</span><br><span class="line">    test[b]=temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>精简代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] partition(<span class="keyword">int</span>[] test,<span class="keyword">int</span> L,<span class="keyword">int</span> R, <span class="keyword">int</span> num)&#123;</span><br><span class="line">    <span class="keyword">int</span> less = L-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> more = R+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> cur = L;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(cur!=more)&#123;</span><br><span class="line">        <span class="keyword">if</span>(test[cur]&lt;num)&#123;</span><br><span class="line">            swap(test,++less,cur++);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(test[cur]==num)&#123;</span><br><span class="line">            cur++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            swap(test,cur,--more);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; less + <span class="number">1</span>, more - <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] test,<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = test[a];</span><br><span class="line">    test[a]=test[b];</span><br><span class="line">    test[b]=temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>完整测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//荷兰国旗</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NetherlandsFlag</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] test = generateArray();</span><br><span class="line">        printArray(test);</span><br><span class="line">        <span class="keyword">int</span>[] res = partition(test, <span class="number">0</span>, test.length - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        printArray(test);</span><br><span class="line">        System.out.println(res[<span class="number">0</span>]);</span><br><span class="line">        System.out.println(res[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// for test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] generateArray() &#123;<span class="comment">//生成测试数组</span></span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            arr[i] = (<span class="keyword">int</span>) (Math.random() * <span class="number">3</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// for test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printArray</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;<span class="comment">//打印出生成的数组</span></span><br><span class="line">        <span class="keyword">if</span> (arr == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] partition(<span class="keyword">int</span>[] test,<span class="keyword">int</span> L,<span class="keyword">int</span> R, <span class="keyword">int</span> num)&#123;</span><br><span class="line">        <span class="keyword">int</span> less = L-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> more = R+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> cur =L;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(cur!=more)&#123;</span><br><span class="line">            <span class="keyword">if</span>(test[cur]&lt;num)&#123;</span><br><span class="line">                swap(test,less+<span class="number">1</span>,cur);</span><br><span class="line">                less=less+<span class="number">1</span>;</span><br><span class="line">                cur++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(test[cur]==num)&#123;</span><br><span class="line">                cur++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                swap(test,cur,more-<span class="number">1</span>);</span><br><span class="line">                more--;</span><br><span class="line">                <span class="comment">//cur++;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; less + <span class="number">1</span>, more - <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] test,<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = test[a];</span><br><span class="line">        test[a]=test[b];</span><br><span class="line">        test[b]=temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">沄渊</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
